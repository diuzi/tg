<!DOCTYPE html>
<html lang="ru-RU" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV News</title>
    <!-- 图标库 Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 优化字体: Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- 主题颜色变量 --- */
:root, html[data-theme="dark"] {
    --brand-cyan: #00FFFF; /* 定义固定的青色 */
    --bg-main: #0d1117;
    --card-bg: #161b22;
    --card-border: #30363d;
    --text-primary: #c9d1d9;
    --text-secondary: #8b949e;
    --text-accent: #58a6ff;
    --accent-color: #00FFFF;
    --button-bg: #21262d;
    --indicator-active: #00FFFF; /* 将活动指示点默认也改为青色 */
    --indicator-inactive: #30363d;
    --stats-bg: rgba(33, 38, 45, 0.5);
    --nav-bg: rgba(33, 38, 45, 0.9);
    --nav-hover-bg: var(--accent-color);
    --nav-hover-color: var(--bg-main);
}

html[data-theme="light"] {
    --bg-main: #ffffff;
    --card-bg: #fdfdfd;
    --card-border: #e1e4e8;
    --text-primary: #24292e;
    --text-secondary: #586069;
    --text-accent: #0366d6;
    --accent-color: #007BFF;
    --button-bg: #f6f8fa;
    --indicator-active: #007BFF;
    --indicator-inactive: #d1d5da;
    --stats-bg: rgba(246, 248, 250, 0.8);
    --nav-bg: rgba(255, 255, 255, 0.8);
    --nav-hover-bg: var(--accent-color);
    --nav-hover-color: #ffffff;
}

html[data-theme="gray"] {
    --bg-main: #f0f2f5;
    --card-bg: #ffffff;
    --card-border: #d9d9d9;
    --text-primary: #333333;
    --text-secondary: #666666;
    --text-accent: #0056b3;
    --accent-color: #006ae0;
    --button-bg: #e9ecef;
    --indicator-active: #0056b3;
    --indicator-inactive: #b0b0b0;
    --stats-bg: rgba(233, 236, 239, 0.8);
    --nav-bg: rgba(233, 236, 239, 0.9);
    --nav-hover-bg: var(--accent-color);
    --nav-hover-color: #ffffff;
}


/* --- 浮动控制面板样式 --- */
.top-controls {
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative; /* 默认相对定位 */
    z-index: 1000;
    transition: all 0.3s ease-in-out;
}

/* 滚动时应用的粘性定位样式 */
.top-controls.sticky {
    position: fixed; /* 固定在视口顶部 */
    top: 0;
    left: 0;
    right: 0;
    background-color: var(--nav-bg); /* 带透明度的背景 */
    backdrop-filter: blur(5px); /* 毛玻璃效果 */
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 8px 15px;
}

.theme-selector select, .language-selector select {
    padding: 6px 10px;
    border-radius: 5px;
    border: 1px solid var(--card-border);
    background: var(--button-bg);
    color: var(--text-accent);
    font-weight: 500;
    cursor: pointer;
    outline: none;
    font-size: 0.9rem;
    transition: background 0.3s, color 0.3s, border-color 0.3s;
}
/* -------------------------------------------------- */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    /* 优化：添加 Inter 字体，并保留系统字体作为备用 */
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
                 'Helvetica Neue', Arial, sans-serif;
    background: var(--bg-main);
    color: var(--text-primary);
    line-height: 1.5;
    padding: 0 15px 15px;
    max-width: 1200px;
    margin: 0 auto;
    min-height: 100vh;
    font-size: 15px;
    position: relative;
    transition: background 0.3s, color 0.3s;
}

.header-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin-bottom: 0; /* [修改] 移除它自己的下边距，不再推开下面的元素 */
    margin-top: 15px;
}

.header-container h2 { font-size: 1.3rem; font-weight: 700; color: var(--accent-color); }
.highlights h2, .news-title { font-size: 1.1rem; font-weight: 600; color: var(--text-primary); }
.highlight-item { font-size: 0.95rem; font-weight: 500; }

.news-content {
    font-size: 0.9rem;
    font-weight: 400;
    margin-bottom: 20px;
    color: var(--text-secondary);
    line-height: 1.7;
    background: var(--card-bg);
    padding: 15px;
    border: 1px solid var(--card-border);
    border-radius: 8px;
    /* [修改] 使用 overflow-wrap 作为备用方案，并开启自动连字符 */
    overflow-wrap: break-word;
    word-wrap: break-word; /* 兼容旧版浏览器 */
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
    hyphens: auto;
    word-break: normal; /* [修改] 恢复到 normal，让 hyphens 生效 */
}
footer { font-size: 0.75rem; font-weight: 400; color: var(--text-secondary); }
<!--.header-logo {-->
<!--width: 100%; /* 宽度占满容器 */-->
<!--max-width: 450px; /* 在大屏幕上限制最大宽度，防止过大 */-->
<!--height: auto; /* 高度自动调整，保持长宽比不变 */-->
<!--margin-bottom: 15px; /* 增加与下方内容的间距 */-->
<!--}-->
<!--.header-logo path { transition: fill 0.3s; }-->
.header-logo {
    width: 100%;
    max-width: 450px;
    height: auto;
    display: block;
    margin-bottom: 15px;
    margin-left: auto;
    margin-right: auto;
}
header { margin: 20px 0; padding-bottom: 15px; border-bottom: 2px solid var(--accent-color); position: relative; }
h1 { color: var(--accent-color); font-size: 2.2rem; margin-bottom: 8px; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1); position: relative; display: inline-block; padding: 0 15px; }
h1:after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 80px; height: 3px; background: var(--accent-color); border-radius: 2px; }

.stats-bar {
    display: flex;
    justify-content: center;
    gap: 40px;
    background: none;
    border: none;
    box-shadow: none;
    padding: 0;
    /* [修改] 大幅减少上边距，让它紧随Logo；保持合理的下边距 */
    margin: 15px 0 25px 0;
    font-size: 0.8rem;
}

.meta-info {
    font-size: 0.8rem;
    display: flex;
    justify-content: center; /* 居中对齐 */
    padding: 4px 0;          /* 调整垂直内边距，使其更紧凑 */
    margin: 0 0 10px 0;      /* 调整外边距，主要保留下方间距 */
    background: none;        /* 去掉背景 */
    border: none;            /* 去掉边框 */
    box-shadow: none;        /* 去掉阴影 */
}

.stat-item { display: flex; align-items: center; gap: 6px; color: var(--text-secondary); }
.category { font-weight: bold; background: var(--button-bg); padding: 4px 8px; border-radius: 20px; display: inline-flex; align-items: center; gap: 6px; color: var(--text-accent); border: 1px solid var(--card-border); }
.date { display: flex; align-items: center; gap: 6px; font-weight: 400; color: var(--text-secondary); }
.date i {
    color: var(--brand-cyan); /* 使用品牌青色 */
    font-size: 1em;
}
.highlights {
    /* ...前面的 background, border-radius, padding, animation 等保持不变... */
    background: linear-gradient(145deg, #1c222c, #161b22);
    border-radius: 12px;
    padding: 20px;
    position: relative;
    border: none;
    box-shadow: 0 0 12px rgba(0, 255, 255, 0.2), 0 0 20px rgba(0, 255, 255, 0.15);
    animation: pulse-glow 2.8s infinite ease-in-out;
    transition: all 0.3s ease-in-out;

    /* [核心修改] 将下外边距增加到 80px，为分割线创造巨大的呼吸空间 */
    margin-bottom: 80px;
}
html[data-theme="light"] .highlights {
    background: linear-gradient(145deg, #fdfdfd, #f9f9f9);
}
html[data-theme="gray"] .highlights {
    background: linear-gradient(145deg, #ffffff, #f7f7f7);
}
@keyframes pulse-glow {
    /* "静止"状态：辉光很弱 */
    0%, 100% {
        box-shadow: 0 0 12px rgba(0, 255, 255, 0.2), 0 0 20px rgba(0, 255, 255, 0.15);
    }
    /* "脉冲"顶峰：辉光非常强烈和宽广 */
    50% {
        /* [修改] 大幅增强了透明度、模糊和扩散范围，视觉冲击力更强 */
        box-shadow: 0 0 25px rgba(0, 255, 255, 0.7), 0 0 50px 4px rgba(0, 255, 255, 0.5);
    }
}
.highlights::after {
    content: '';
    position: absolute;
    /* [核心修改] 将 bottom 设为 -40px，使其正好位于 80px 外边距的正中间 */
    bottom: -40px;
    left: 10%;
    right: 10%;
    width: 80%;
    height: 2px;
    background: linear-gradient(to right,
        transparent,
        rgba(0, 255, 255, 0.6),
        transparent
    );
    opacity: 0.8;
}
.highlights h2 {
    color: var(--brand-cyan);
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px dashed var(--card-border);
    display: flex;
    align-items: center;
    justify-content: center; /* 使标题和图标整体居中 */
    gap: 8px;
}
.highlights h2 i {
    color: var(--brand-cyan); /* 固定图标颜色 */
}
.highlight-item {
    font-size: 0.95rem;
    font-weight: 500;
    margin: 10px 0;
    padding: 8px;
    background: var(--button-bg);
    border-radius: 6px;
    display: flex;
    align-items: center; /* 垂直居中对齐 */
    gap: 10px; /* 为圆点和文本之间添加间距 */
    color: var(--text-primary);
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    /* [修改] 开启自动连字符，并设置备用方案 */
    overflow-wrap: break-word;
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
    hyphens: auto;
    word-break: normal;
}
.highlight-item::before {
    content: '•'; /* 定义内容为圆点 */
    color: var(--text-primary); /* 颜色跟随主题的主要文本颜色 */
    font-size: 1.5rem; /* 圆点大小 */
    line-height: 1; /* 防止影响布局行高 */
}
.highlights .source-link:hover {
    color: var(--brand-cyan); /* 鼠标悬浮时变为品牌青色 */
}
html[data-theme="dark"] .highlight-item:hover { background: rgba(0, 255, 255, 0.1); transform: translateX(5px); box-shadow: 0 3px 8px rgba(0, 255, 255, 0.1); }
html[data-theme="light"] .highlight-item:hover { background: rgba(0, 123, 255, 0.1); transform: translateX(5px); box-shadow: 0 3px 8px rgba(0, 123, 255, 0.1); }
html[data-theme="gray"] .highlight-item:hover { background: rgba(0, 86, 179, 0.1); transform: translateX(5px); box-shadow: 0 3px 8px rgba(0, 86, 179, 0.1); }
.news-item { background: var(--card-bg); border-radius: 12px; padding: 15px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); border: 1px solid var(--card-border); position: relative; overflow: hidden; }
.news-item:first-child { border-top: none; }
.news-title {
    color: var(--text-primary);
    margin: 10px 0 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--card-border);
    line-height: 1.3;
    /* [修改] 开启自动连字符，并设置备用方案 */
    overflow-wrap: break-word;
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
    hyphens: auto;
    word-break: normal;
}
.image-gallery-container {
    margin: 20px 0;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
}
.image-gallery {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    gap: 15px;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-snap-type: x mandatory;
}
.image-gallery::-webkit-scrollbar { display: none; }
.image-container {
    flex: 0 0 100%;
    width: 100%;
    aspect-ratio: 16 / 10;
    background: var(--button-bg);
    border-radius: 12px;
    overflow: hidden;
    scroll-snap-align: center;
    position: relative;
    cursor: zoom-in; /* 改变鼠标指针，提示可点击 */
}
.image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
}
.image-container:hover img {
    transform: scale(1.05);
}

/* 优化点2: 根据用户要求，隐藏主图库的左右导航按钮 */
.gallery-nav {
    display: none;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background: var(--nav-bg);
    backdrop-filter: blur(5px);
    border-radius: 50%;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
    color: var(--text-primary);
    font-size: 1rem;
    border: 1px solid transparent;
}
.gallery-nav:hover {
    background: var(--accent-color);
    color: var(--bg-main);
    transform: translateY(-50%) scale(1.1);
}
.gallery-nav.prev { left: 15px; }
.gallery-nav.next { right: 15px; }
.gallery-indicators {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
    gap: 8px;
    z-index: 10;
    padding: 5px 10px;
    background: var(--nav-bg);
    backdrop-filter: blur(5px);
    border-radius: 20px;
}
.indicator {
    width: 20px;
    height: 4px;
    border-radius: 2px;
    background: var(--indicator-inactive);
    cursor: pointer;
    transition: all 0.4s ease;
}
.indicator.active {
    background: var(--brand-cyan); /* 使用品牌青色 */
    width: 30px;
}

/* --- 全屏图片查看器（Lightbox）样式 --- */
.fullscreen-viewer {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.9);
    backdrop-filter: blur(8px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    -webkit-user-select: none; /* 禁止文本选中 */
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.fullscreen-viewer.show {
    opacity: 1;
    visibility: visible;
}
.fullscreen-viewer img {
    max-width: 90%;
    max-height: 85%;
    object-fit: contain;
    transition: transform 0.3s ease-out, opacity 0.3s ease-out; /* 为图片切换添加过渡 */
    transform: scale(1);
    opacity: 1;
}
/* 图片切换时的动画效果 */
.fullscreen-viewer img.fade-out {
    transform: scale(0.95);
    opacity: 0;
}
/* 关闭按钮 */
.fullscreen-close {
    position: absolute;
    top: 20px;
    right: 25px;
    width: 40px;
    height: 40px;
    font-size: 24px;
    color: #fff;
    background: rgba(40, 40, 40, 0.7);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.3s, background-color 0.3s;
}
.fullscreen-close:hover {
    transform: rotate(90deg);
    background-color: rgba(255, 0, 0, 0.8);
}
/* 左右导航箭头 (悬浮时保留) */
.fullscreen-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 45px;
    height: 45px;
    font-size: 22px;
    color: #fff;
    background: rgba(40, 40, 40, 0.6);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.3s, background-color 0.3s;
}
.fullscreen-nav:hover {
    transform: translateY(-50%) scale(1.1);
    background: var(--accent-color);
}
.fullscreen-nav.prev { left: 20px; }
.fullscreen-nav.next { right: 20px; }
/* --- 全屏查看器样式结束 --- */

.news-content p { margin-bottom: 12px; }
.source-link {
    display: inline-flex; /* 确保 transform 生效 */
    align-items: center;
    text-decoration: none;
    color: var(--text-accent);
    font-weight: 600;
    transition: all 0.3s ease;
    padding: 0;
    background: none;
    box-shadow: none;
    font-size: 0.95em;
    margin-left: 4px;
    vertical-align: baseline;
    line-height: 1;
    margin-top: 0 !important;
}
.source-link:hover {
    color: var(--brand-cyan); /*统一悬浮颜色为品牌青色 */
    text-decoration: underline;
    transform: scale(1.25); /* [新增] 鼠标悬浮时放大 */
}
.source-link i { font-size: 0.95em; margin-left: 3px; vertical-align: middle; }
footer { text-align: center; margin-top: 40px; padding: 20px; border-top: 1px solid var(--card-border); background: var(--card-bg); border-radius: 12px; }

/* --- 返回顶部按钮样式 --- */
#back-to-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 45px;
    height: 45px;
    background-color: var(--accent-color);
    color: var(--nav-hover-color);
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    font-size: 1.2rem;
}
#back-to-top.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}
#back-to-top:hover {
    transform: scale(1.1);
}

@media (max-width: 768px) {

    /*
     * 逻辑1: 整体收紧页面两侧间距
     */
    body {
        padding-left: 10px;
        padding-right: 10px;
    }

    /*
     * 逻辑2: 收紧 Highlights (要闻) 区域的间距
     */
    .highlights {
        padding: 20px 15px;
    }

    /*
     * 逻辑3: 优化新闻卡片布局
     */
    .news-item {
        padding: 15px 12px;
        border: 1px solid transparent;
        background-clip: padding-box;
        border-image: linear-gradient(to bottom right, var(--card-border), transparent) 1;
    }

    /*
     * 逻辑4: 让新闻标题“边缘出血”，并减少其下边距
     */
    .news-title {
        margin: -15px -12px 8px -12px;
        padding: 12px 12px;
        background: linear-gradient(to right, rgba(0, 255, 255, 0.05), transparent);
        border-radius: 12px 12px 0 0; /* [修改] 为移动端标题的左上和右上角添加圆角 */
    }
    html[data-theme="light"] .news-title {
        background: linear-gradient(to right, rgba(0, 123, 255, 0.05), transparent);
    }
    html[data-theme="gray"] .news-title {
        background: linear-gradient(to right, rgba(0, 86, 179, 0.05), transparent);
    }

    /*
     * 逻辑5: 优化日期（meta-info）的位置和间距
     */
    .meta-info {
        justify-content: center;    /* [最终修正] 将对齐方式从 flex-end 改回 center，使其恢复居中 */
        padding: 0;
        margin: 0 0 15px 0;
    }

    /*
     * 逻辑6: 让图片库“边缘出血”
     */
    .image-gallery-container {
        margin-left: -12px;
        margin-right: -12px;
        margin-top: 0;
        border-radius: 12px;
        overflow: hidden;
    }

    /*
     * 逻辑7: 移除新闻正文自身的内边距
     */
    .news-content {
        padding: 0;
        margin-top: 15px;
        background: none;
        border: none;
    }
}

    </style>

</head>
<body>
<!-- 浮动控制元素的容器 -->
<div class="top-controls" id="top-controls">
    <div class="theme-selector">
        <select id="themeSelect">
            <option value="dark" data-ru="Темная" data-zh="深色" data-en="Dark">深色</option>
            <option value="light" data-ru="Светлая" data-zh="浅色" data-en="Light">浅色</option>
            <option value="gray" data-ru="Серая" data-zh="灰色" data-en="Gray">灰色</option>
        </select>
    </div>
    <div class="language-selector">
        <select id="languageSelect">
            <option value="ru">Русский</option>
            <option value="zh">中文</option>
            <option value="en">English</option>
        </select>
    </div>
</div>

<div class="header-container" id="main-header">
<!--    <svg class="header-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 300" width="700" height="300">-->
<!--        <defs>-->
<!--            <style>-->
<!--                /*-->
<!--                   注意: 为了达到最佳效果，建议您加载logo所使用的精确字体。-->
<!--                   这里的 'Arial', 'Helvetica' 是一个通用的粗体无衬线字体作为替代。-->
<!--                */-->
<!--                .main-text-font {-->
<!--                  font-family: 'Arial', 'Helvetica', sans-serif;-->
<!--                  font-size: 48px;-->
<!--                  font-weight: 900; /* 非常粗的字重 */-->
<!--                  letter-spacing: 2px;-->
<!--                }-->
<!--                .tagline-font {-->
<!--                  font-family: 'Arial', 'Helvetica', sans-serif;-->
<!--                  font-size: 18px;-->
<!--                  font-weight: normal;-->
<!--                  letter-spacing: 0.5px;-->
<!--                }-->
<!--                .cyan-color {-->
<!--                  fill: #00E5E5; /* 青色 */-->
<!--                }-->
<!--                .black-color {-->
<!--                  fill: #000000; /* 黑色 */-->
<!--                }-->
<!--            </style>-->
<!--        </defs>-->

<!--        &lt;!&ndash; 第一行：图标 &ndash;&gt;-->
<!--        <g id="logo-icon" transform="translate(350, 80)">-->
<!--            &lt;!&ndash; 中间的圆圈 &ndash;&gt;-->
<!--            <circle class="cyan-color" cx="0" cy="0" r="10"/>-->
<!--            &lt;!&ndash; 左边的形状 (指向左侧，右边是内凹弧形) &ndash;&gt;-->
<!--            <path class="cyan-color" d="M -55,0 L -25,-22 C -40,0 -40,0 -25,22 L -55,0 Z"/>-->
<!--            &lt;!&ndash; 右边的形状 (指向右侧，左边是内凹弧形) &ndash;&gt;-->
<!--            <path class="cyan-color" d="M 55,0 L 25,-22 C 40,0 40,0 25,22 L 55,0 Z"/>-->
<!--        </g>-->

<!--        &lt;!&ndash; 第二行：主要文字 "ATOM INTELLIGENCE" &ndash;&gt;-->
<!--        <text x="50%" y="185" text-anchor="middle" class="main-text-font">-->
<!--            <tspan class="black-color">ATOM INTELLIGENCE</tspan>-->
<!--        </text>-->

<!--        &lt;!&ndash; 第三行：标语 &ndash;&gt;-->
<!--        <text x="50%" y="235" text-anchor="middle" class="tagline-font black-color">-->
<!--            Transforming Insights, Powering Innovation-->
<!--        </text>-->

<!--    </svg>-->
        <img src="https://tg-connors-projects-87a4e157.vercel.app/logo_white.png" alt="Atom Intelligence" class="header-logo" id="logoImage">
</div>

<div class="stats-bar">
    <div class="stat-item">
        <i class="fas fa-file-word fa-beat-fade"></i>
        <span>
            <span id="wordsCount" data-ru="" data-zh="" data-en=""></span>
            <span id="wordsText" data-ru="Слов" data-zh="字" data-en="Words">Слов</span>
        </span>
    </div>
    <div class="stat-item">
        <i class="fas fa-hourglass-half fa-spin"></i>
        <span>
            <span id="minsCount" data-ru="" data-zh="" data-en=""></span>
            <span id="minsText" data-ru="Мин" data-zh="分钟" data-en="Mins">Мин</span>
        </span>
    </div>
</div>

<!-- 主体内容 -->

<section class="highlights">
    <h2><i class="fas fa-star"></i> <span id="highlightsText">Основные моменты</span></h2>
    
    <div class="highlight-item"
         data-ru='"\u0412\u044b\u0440\u0443\u0447\u043a\u0430 \u003cb\u003e371,3\u202f\u043c\u043b\u0440\u0434 \u044e\u0430\u043d\u0435\u0439\u003c/b\u003e, \u043f\u0440\u0438\u0431\u044b\u043b\u044c \u003cb\u003e15,5\u202f\u043c\u043b\u0440\u0434 \u044e\u0430\u043d\u0435\u0439\u003c/b\u003e, \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438 \u0432 \u041d\u0418\u041e\u041a\u0420 \u003cb\u003e30,9\u202f\u043c\u043b\u0440\u0434 \u044e\u0430\u043d\u0435\u0439\u003c/b\u003e (+53\u202f%), \u043f\u0440\u043e\u0434\u0430\u0436\u0438 \u003cb\u003e2,49\u202f\u043c\u043b\u043d\u202f\u0435\u0434\u0438\u043d\u0438\u0446\u003c/b\u003e (+27\u202f%), \u0437\u0430 \u0440\u0443\u0431\u0435\u0436\u043e\u043c \u003cb\u003e550\u202f\u0442\u044b\u0441\u202f\u0435\u0434\u0438\u043d\u0438\u0446\u003c/b\u003e (+130\u202f%), \u043e\u0445\u0432\u0430\u0442 \u003cb\u003e112 \u0441\u0442\u0440\u0430\u043d\u003c/b\u003e."'
         data-zh='"\u6536\u5165\u003cb\u003e3713\u4ebf\u5143\u003c/b\u003e,\u5229\u6da6\u003cb\u003e155\u4ebf\u5143\u003c/b\u003e,\u7814\u53d1\u6295\u5165\u003cb\u003e309\u4ebf\u5143\u003c/b\u003e\uff08+53%\uff09,\u9500\u91cf\u003cb\u003e249\u4e07\u53f0\u003c/b\u003e\uff08+27%\uff09,\u6d77\u5916\u003cb\u003e55\u4e07\u8f86\u003c/b\u003e\uff08+130%\uff09,\u8986\u76d6\u003cb\u003e112\u56fd\u003c/b\u003e\u3002"'
         data-en='"Revenue \u003cb\u003e371.3 billion yuan\u003c/b\u003e, profit \u003cb\u003e15.5 billion yuan\u003c/b\u003e, R\u0026amp;D investment \u003cb\u003e30.9 billion yuan\u003c/b\u003e (+53%), sales \u003cb\u003e2.49 million units\u003c/b\u003e (+27%), overseas \u003cb\u003e550,000 units\u003c/b\u003e (+130%), coverage \u003cb\u003e112 countries\u003c/b\u003e."'>
        <span>Выручка <b>371,3 млрд юаней</b>, прибыль <b>15,5 млрд юаней</b>, инвестиции в НИОКР <b>30,9 млрд юаней</b> (+53 %), продажи <b>2,49 млн единиц</b> (+27 %), за рубежом <b>550 тыс единиц</b> (+130 %), охват <b>112 стран</b>. <a href="https://www.autohome.com.cn/news/202508/1308626.html#pvareaid=102624" class="source-link"><i class="fas fa-arrow-up-right-from-square"></i></a></span>
    </div>
    
    <div class="highlight-item"
         data-ru='"\u0421\u0440\u0435\u0434\u043d\u044f\u044f \u0446\u0435\u043d\u0430 \u0432 \u043c\u0430\u0435 \u003cb\u003e18,7\u202f\u043c\u043b\u043d \u044e\u0430\u043d\u0435\u0439\u003c/b\u003e, \u0432 \u0438\u044e\u043b\u0435 \u0432\u044b\u0440\u043e\u0441\u043b\u0430 \u0434\u043e \u003cb\u003e19,45\u202f\u043c\u043b\u043d \u044e\u0430\u043d\u0435\u0439\u003c/b\u003e; 8\u202f\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043b\u0441\u044f \u043f\u0440\u0435\u043c\u044c\u0435\u0440\u043d\u044b\u0439 \u0437\u0430\u043f\u0443\u0441\u043a \u041b\u0438\u043d\u043a \u044d\u043d\u0434 \u041a\u043e\u202f10\u202fEM\u2011P, \u043a \u043a\u043e\u043d\u0446\u0443 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u043b\u0438 \u041b\u0438\u043d\u043a \u044d\u043d\u0434 \u041a\u043e\u202f07 \u0438\u202f08; \u0432\u043e \u0432\u0441\u0435\u0439 \u043b\u0438\u043d\u0435\u0439\u043a\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e \u043e\u0441\u043d\u0430\u0449\u0435\u043d\u044b \u043b\u0438\u0434\u0430\u0440, \u043f\u043e\u043b\u043d\u043e\u043f\u0440\u0438\u0432\u043e\u0434\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c \u0438 FlymeAuto\u202f2.0."'
         data-zh='"5\u6708\u5747\u4ef7\u003cb\u003e18.7\u4e07\u5143\u003c/b\u003e,7\u6708\u6da8\u81f3\u003cb\u003e19.45\u4e07\u5143\u003c/b\u003e\uff1b9\u67088\u65e5\u9996\u53d1\u9886\u514b10 EM-P,9\u6708\u5e95\u63a8\u51fa\u9886\u514b07\u300108\uff1b\u5168\u7cfb\u6807\u914d\u6fc0\u5149\u96f7\u8fbe\u3001\u56db\u9a71\u3001FlymeAuto 2.0\u3002"'
         data-en='"Average price in May \u003cb\u003e\u00a5187,000\u003c/b\u003e, rising to \u003cb\u003e\u00a5194,500\u003c/b\u003e in July; first launched Lynk \u0026amp; Co 10 EM-P on September 8, and Lynk \u0026amp; Co 07 and 08 will be launched at the end of September; the entire lineup comes standard with lidar, all-wheel drive, and FlymeAuto 2.0."'>
        <span>Средняя цена в мае <b>18,7 млн юаней</b>, в июле выросла до <b>19,45 млн юаней</b>; 8 сентября состоялся премьерный запуск Линк энд Ко 10 EM‑P, к концу сентября появятся модели Линк энд Ко 07 и 08; во всей линейке стандартно оснащены лидар, полноприводный режим и FlymeAuto 2.0. <a href="https://www.autohome.com.cn/news/202508/1308630.html#pvareaid=102624" class="source-link"><i class="fas fa-arrow-up-right-from-square"></i></a></span>
    </div>
    
</section>



<article class="news-item">
    <h2 class="news-title"
        data-ru='"\u003cb\u003e\u0411\u0418\u0414\u003c/b\u003e \u0437\u0430 \u043f\u0435\u0440\u0432\u043e\u0435 \u043f\u043e\u043b\u0443\u0433\u043e\u0434\u0438\u0435 \u0434\u043e\u0441\u0442\u0438\u0433 \u0432\u044b\u0440\u0443\u0447\u043a\u0438 \u0432 371,3 \u043c\u043b\u0440\u0434 \u044e\u0430\u043d\u0435\u0439 \u0438 \u043f\u0440\u043e\u0434\u0430\u043b 2,49 \u043c\u043b\u043d \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439."'
        data-zh='"\u6bd4\u4e9a\u8fea\u4e0a\u534a\u5e74\u8425\u65363713\u4ebf\u5143,\u9500\u91cf249\u4e07\u53f0\u3002"'
        data-en='"\u003cb\u003eBYD\u003c/b\u003e posted first-half revenue of 371.3\u202fbillion yuan and sales of 2.49\u202fmillion units."'><b>БИД</b> за первое полугодие достиг выручки в 371,3 млрд юаней и продал 2,49 млн автомобилей.</h2>
    <div class="meta-info">
        <span class="date"><i class="fas fa-calendar-alt"></i> 2025-08-30</span>
    </div>

    
    <div class="image-gallery-container">
        <div class="image-gallery" id="gallery-1">
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/www2/chejiahaodfs/g33/M03/32/58/1200x0_1_autohomecar__ChxpVWixrZiAeTCwABOqqvUH6rU844.png" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/www2/chejiahaodfs/g34/M08/24/BD/1200x0_1_autohomecar__ChxpV2ixrkuACqZ7ABYaVwfbyc8248.png" alt="新闻配图" loading="lazy">
            </div>
            
        </div>
        <div class="gallery-nav prev" onclick="scrollGallery('gallery-1', -1)"><i class="fas fa-chevron-left"></i></div>
        <div class="gallery-nav next" onclick="scrollGallery('gallery-1', 1)"><i class="fas fa-chevron-right"></i></div>
        <div class="gallery-indicators" id="indicators-1"></div>
    </div>
    

    <div class="news-content"
         data-ru='"\u003cb\u003e\u0411\u0418\u0414 (BYD)\u003c/b\u003e \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u043f\u043e\u043b\u043e\u0432\u0438\u043d\u0435 2025\u202f\u0433\u043e\u0434\u0430 \u0441\u043e\u043e\u0431\u0449\u0438\u043b \u043e \u0432\u044b\u0440\u0443\u0447\u043a\u0435 371,3\u202f\u043c\u043b\u0440\u0434 \u044e\u0430\u043d\u0435\u0439, \u0447\u0438\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u0431\u044b\u043b\u0438 15,5\u202f\u043c\u043b\u0440\u0434 \u044e\u0430\u043d\u0435\u0439, \u0438\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u044f\u0445 \u0432 \u041d\u0418\u041e\u041a\u0420 30,9\u202f\u043c\u043b\u0440\u0434 \u044e\u0430\u043d\u0435\u0439, \u0440\u043e\u0441\u0442\u0435 \u043d\u0430 53\u202f% \u043f\u043e \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044e \u0441 \u043f\u0440\u043e\u0448\u043b\u044b\u043c \u0433\u043e\u0434\u043e\u043c, \u043e\u0431\u0449\u0435\u043c\u0438\u0440\u043e\u0432\u044b\u0445 \u043f\u0440\u043e\u0434\u0430\u0436\u0430\u0445 2,49\u202f\u043c\u043b\u043d \u0435\u0434\u0438\u043d\u0438\u0446, \u043f\u0440\u043e\u0434\u0430\u0436\u0430\u0445 \u0437\u0430 \u0440\u0443\u0431\u0435\u0436\u043e\u043c 550\u202f\u0442\u044b\u0441. \u0435\u0434\u0438\u043d\u0438\u0446, \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u0431\u043e\u043b\u0435\u0435 \u0447\u0435\u043c \u0432 112\u202f\u0441\u0442\u0440\u0430\u043d\u0430\u0445."'
         data-zh='"\u6bd4\u4e9a\u8fea2025\u4e0a\u534a\u5e74\u8425\u4e1a\u6536\u51653713\u4ebf\u5143,\u51c0\u5229\u6da6155\u4ebf\u5143,\u7814\u53d1\u6295\u5165309\u4ebf\u5143,\u540c\u6bd4\u589e\u957f53%,\u5168\u7403\u9500\u91cf249\u4e07\u53f0,\u6d77\u5916\u9500\u91cf55\u4e07\u8f86,\u5e03\u5c40\u903e112\u4e2a\u56fd\u5bb6\u3002"'
         data-en='"\u003cb\u003eBYD\u003c/b\u003e reported first-half 2025 operating revenue of 371.3 billion yuan, net profit of 15.5 billion yuan, and R\u0026amp;D investment of 30.9 billion yuan, representing a year-over-year increase of 53%. Global sales reached 2.49 million vehicles, with overseas sales of 550,000 units, and the company has a presence in more than 112 countries."'>
        <b>БИД (BYD)</b> в первой половине 2025 года сообщил о выручке 371,3 млрд юаней, чистой прибыли 15,5 млрд юаней, инвестициях в НИОКР 30,9 млрд юаней, росте на 53 % по сравнению с прошлым годом, общемировых продажах 2,49 млн единиц, продажах за рубежом 550 тыс. единиц, присутствии более чем в 112 странах.
        <a href="https://www.autohome.com.cn/news/202508/1308626.html#pvareaid=102624" class="source-link" style="display: inline-block; margin-top: 15px;"><i class="fas fa-arrow-up-right-from-square"></i></a>
    </div>
</article>

<article class="news-item">
    <h2 class="news-title"
        data-ru='"\u003cb\u003e\u041b\u0438\u043d\u043a \u044d\u043d\u0434 \u041a\u043e\u003c/b\u003e \u0441\u0440\u0435\u0434\u043d\u044f\u044f \u0446\u0435\u043d\u0430 \u0432\u044b\u0440\u043e\u0441\u043b\u0430 \u0434\u043e 19,45\u202f\u043c\u043b\u043d \u044e\u0430\u043d\u0435\u0439, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432\u044b\u043f\u0443\u0441\u0442\u0438\u043b\u0430 \u043d\u043e\u0432\u0443\u044e \u043c\u043e\u0434\u0435\u043b\u044c, \u0443\u0441\u0438\u043b\u0438\u0432 \u0435\u0451 \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438."'
        data-zh='"\u9886\u514b\u5747\u4ef7\u5347\u81f319.45\u4e07\u5143,\u63a8\u51fa\u65b0\u8f66\u578b\u5f3a\u5316\u667a\u80fd\u5316\u3002"'
        data-en='"\u003cb\u003eLynk \u0026amp; Co\u003c/b\u003e average price climbs to \u00a5194,500, and unveils a new model to boost intelligence."'><b>Линк энд Ко</b> средняя цена выросла до 19,45 млн юаней, а также выпустила новую модель, усилив её интеллектуальные функции.</h2>
    <div class="meta-info">
        <span class="date"><i class="fas fa-calendar-alt"></i> 2025-08-29</span>
    </div>

    
    <div class="image-gallery-container">
        <div class="image-gallery" id="gallery-2">
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/www2/chejiahaodfs/g34/M02/26/09/1200x0_1_autohomecar__ChtpWGixy2KAG4dJADCirw8cSvo447.png" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/www2/chejiahaodfs/g33/M06/33/80/1200x0_1_autohomecar__ChxpVmixzdWAH4UcAC6uVXCVHkk363.png" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/www2/chejiahaodfs/g33/M02/33/81/1200x0_1_autohomecar__ChxpVWixzlGAIU_0ABQtgL7rk6M945.png" alt="新闻配图" loading="lazy">
            </div>
            
        </div>
        <div class="gallery-nav prev" onclick="scrollGallery('gallery-2', -1)"><i class="fas fa-chevron-left"></i></div>
        <div class="gallery-nav next" onclick="scrollGallery('gallery-2', 1)"><i class="fas fa-chevron-right"></i></div>
        <div class="gallery-indicators" id="indicators-2"></div>
    </div>
    

    <div class="news-content"
         data-ru='"\u003cb\u003e\u041b\u0438\u043d\u043a \u044d\u043d\u0434 \u041a\u043e\u003c/b\u003e \u0432 \u043c\u0430\u0435 2025\u202f\u0433. \u0438\u043c\u0435\u043b\u0430 \u0441\u0440\u0435\u0434\u043d\u0435\u0432\u0437\u0432\u0435\u0448\u0435\u043d\u043d\u0443\u044e \u0446\u0435\u043d\u0443 \u043e\u043a\u043e\u043b\u043e 18,7\u202f\u043c\u043b\u043d \u044e\u0430\u043d\u0435\u0439, \u0432 \u0438\u044e\u043b\u0435 \u2014 19,45\u202f\u043c\u043b\u043d \u044e\u0430\u043d\u0435\u0439; \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u003cb\u003e\u041b\u0438\u043d\u043a \u044d\u043d\u0434 \u041a\u043e 10 EM-P\u003c/b\u003e \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u0432 \u043f\u0440\u043e\u0434\u0430\u0436\u0435 8\u202f\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f, \u0430 \u043a \u043a\u043e\u043d\u0446\u0443 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u0431\u0443\u0434\u0443\u0442 \u0432\u044b\u043f\u0443\u0449\u0435\u043d\u044b \u043c\u043e\u0434\u0435\u043b\u0438 \u003cb\u003e\u041b\u0438\u043d\u043a \u044d\u043d\u0434 \u041a\u043e 07\u003c/b\u003e \u0438 \u003cb\u003e\u041b\u0438\u043d\u043a \u044d\u043d\u0434 \u041a\u043e 08\u003c/b\u003e, \u043f\u043e\u0434\u0447\u0435\u0440\u043a\u043d\u0443\u0432 \u0438\u043d\u0442\u0435\u043b\u043b\u0435\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0437\u0430\u0431\u043e\u0442\u0443 \u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445."'
         data-zh='"\u9886\u514b2025\u5e745\u6708\u52a0\u6743\u5747\u4ef7\u7ea618.7\u4e07\u5143,7\u6708\u5347\u81f319.45\u4e07\u5143\uff1b\u8ba1\u52129\u67088\u65e5\u4e0a\u5e02\u9886\u514b10 EM-P,9\u6708\u5e95\u63a8\u51fa\u9886\u514b07\u300108,\u5f3a\u8c03\u667a\u80fd\u5316\u5347\u7ea7\u4e0e\u8001\u7528\u6237\u5173\u6000\u3002"'
         data-en='"Lynk \u0026amp; Co\u0027s weighted average price in May 2025 was about 187,000 yuan, rising to 194,500 yuan in July; the company plans to launch the Lynk \u0026amp; Co 10 EM-P on September 8 and introduce the Lynk \u0026amp; Co 07 and Lynk \u0026amp; Co 08 at the end of September, emphasizing smart upgrades and care for existing customers."'>
        <b>Линк энд Ко</b> в мае 2025 г. имела средневзвешенную цену около 18,7 млн юаней, в июле — 19,45 млн юаней; планируется, что <b>Линк энд Ко 10 EM-P</b> появится в продаже 8 сентября, а к концу сентября будут выпущены модели <b>Линк энд Ко 07</b> и <b>Линк энд Ко 08</b>, подчеркнув интеллектуальное обновление и заботу о существующих клиентах.
        <a href="https://www.autohome.com.cn/news/202508/1308630.html#pvareaid=102624" class="source-link" style="display: inline-block; margin-top: 15px;"><i class="fas fa-arrow-up-right-from-square"></i></a>
    </div>
</article>


<footer>
    <p id="copyrightText">Авторское право © Atom 2025. Все права защищены</p>
    <p id="updateText">Последнее обновление: 2025-08-30 12:08:34</p>
</footer>

<button id="back-to-top" title="返回顶部"><i class="fas fa-arrow-up"></i></button>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // 初始化所有功能
        initializeGalleries();
        initializeLanguage();
        initializeTheme();
        // 初始化功能更强的全屏查看器
        initializeFullscreenViewer();
        initializeScrollFeatures();
    });

    // --- 主题初始化 ---
    function initializeTheme() {
        const themeSelect = document.getElementById('themeSelect');
        const savedTheme = localStorage.getItem('selectedTheme') || 'light';
        applyTheme(savedTheme);
        themeSelect.value = savedTheme;
        themeSelect.addEventListener('change', function() {
            const newTheme = this.value;
            applyTheme(newTheme);
            localStorage.setItem('selectedTheme', newTheme);
        });
    }

    function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);

        const logoImage = document.getElementById('logoImage');
        if (logoImage) {
            const baseUrl = 'https://tg-connors-projects-87a4e157.vercel.app';

            if (theme === 'dark') {
                logoImage.src = baseUrl + '/logo_dark.png';
            } else {
                logoImage.src = baseUrl + '/logo_white.png';
            }
        }
    }

    // --- 语言初始化 ---
    function initializeLanguage() {
        const languageSelect = document.getElementById('languageSelect');
        const savedLang = localStorage.getItem('selectedLanguage') || 'ru';
        languageSelect.value = savedLang;
        applyLanguage(savedLang);
        languageSelect.addEventListener('change', function() {
            const lang = this.value;
            localStorage.setItem('selectedLanguage', lang);
            applyLanguage(lang);
        });
    }

    // --- 滚动特性初始化 ---
    function initializeScrollFeatures() {
        const topControls = document.getElementById('top-controls');
        const mainHeader = document.getElementById('main-header');
        const backToTopButton = document.getElementById('back-to-top');
        const scrollThreshold = mainHeader.offsetTop + mainHeader.offsetHeight;

        window.addEventListener('scroll', () => {
            if (window.scrollY > scrollThreshold) {
                topControls.classList.add('sticky');
            } else {
                topControls.classList.remove('sticky');
            }
            if (window.scrollY > 300) {
                backToTopButton.classList.add('show');
            } else {
                backToTopButton.classList.remove('show');
            }
        }, { passive: true });

        backToTopButton.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }

    // --- 画廊初始化 ---
    function initializeGalleries() {
        document.querySelectorAll('.image-gallery').forEach(gallery => {
            const galleryId = gallery.id;
            const indicatorsContainer = document.getElementById(`indicators-${galleryId.split('-')[1]}`);
            const imageContainers = gallery.querySelectorAll('.image-container');
            const imageCount = imageContainers.length;

            if (imageCount === 0 || !indicatorsContainer) return;

            const navContainer = gallery.closest('.image-gallery-container');
            // 如果图片少于等于1张，隐藏导航和指示器
            if (imageCount <= 1) {
                if(navContainer.querySelector('.gallery-nav.prev')) navContainer.querySelector('.gallery-nav.prev').style.display = 'none';
                if(navContainer.querySelector('.gallery-nav.next')) navContainer.querySelector('.gallery-nav.next').style.display = 'none';
                indicatorsContainer.style.display = 'none';
                return;
            }

            indicatorsContainer.innerHTML = '';
            for (let i = 0; i < imageCount; i++) {
                const indicator = document.createElement('div');
                indicator.classList.add('indicator');
                if (i === 0) indicator.classList.add('active');
                indicator.onclick = () => showImage(galleryId, i);
                indicatorsContainer.appendChild(indicator);
            }

            resetAutoScroll(gallery);

            let scrollTimer;
            gallery.addEventListener('scroll', () => {
                 clearTimeout(scrollTimer);
                 scrollTimer = setTimeout(() => {
                      updateIndicators(galleryId);
                 }, 150);
            }, { passive: true });
        });
    }

    // --- 全屏图片查看器 ---
    function initializeFullscreenViewer() {
        let currentImages = [], currentIndex = 0, viewerElement = null, touchStartX = 0, touchEndX = 0;

        document.querySelectorAll('.image-container').forEach(container => {
            container.addEventListener('click', () => {
                const gallery = container.closest('.image-gallery');
                if (!gallery) return;

                // 获取图集内所有图片的URL
                currentImages = Array.from(gallery.querySelectorAll('img')).map(img => img.src);
                // 确定被点击图片在图集中的索引
                currentIndex = Array.from(gallery.children).indexOf(container);

                // 创建并显示查看器
                createViewer();
            });
        });

        // 创建查看器DOM结构
        function createViewer() {
            if (document.querySelector('.fullscreen-viewer')) { document.querySelector('.fullscreen-viewer').remove(); }
            viewerElement = document.createElement('div');
            viewerElement.className = 'fullscreen-viewer';
            viewerElement.innerHTML = `<div class="fullscreen-close" title="关闭">&times;</div><div class="fullscreen-nav prev" title="上一张">&#10094;</div><img src="" alt="全屏图片"><div class="fullscreen-nav next" title="下一张">&#10095;</div>`;
            document.body.appendChild(viewerElement);
            document.body.style.overflow = 'hidden';

            viewerElement.querySelector('.fullscreen-close').addEventListener('click', closeViewer);
            viewerElement.querySelector('.fullscreen-nav.prev').addEventListener('click', () => changeImage(-1));
            viewerElement.querySelector('.fullscreen-nav.next').addEventListener('click', () => changeImage(1));
            viewerElement.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
            viewerElement.addEventListener('touchend', (e) => { touchEndX = e.changedTouches[0].screenX; handleSwipe(); });
            document.addEventListener('keydown', handleKeydown);
            showImageInViewer();
            setTimeout(() => viewerElement.classList.add('show'), 10);
        }

        function showImageInViewer() {
            if (!viewerElement) return;
            const img = viewerElement.querySelector('img');
            const prevNav = viewerElement.querySelector('.fullscreen-nav.prev');
            const nextNav = viewerElement.querySelector('.fullscreen-nav.next');
            img.src = currentImages[currentIndex];
            const display = currentImages.length <= 1 ? 'none' : 'flex';
            prevNav.style.display = nextNav.style.display = display;
        }

        function changeImage(direction) {
            const img = viewerElement.querySelector('img');
            img.classList.add('fade-out');
            setTimeout(() => {
                currentIndex = (currentIndex + direction + currentImages.length) % currentImages.length;
                showImageInViewer();
                img.classList.remove('fade-out');
            }, 300);
        }

        function handleSwipe() {
            if (Math.abs(touchEndX - touchStartX) < 50) return;
            changeImage(touchEndX < touchStartX ? 1 : -1);
        }

        function handleKeydown(e) {
            if (!viewerElement) return;
            if (e.key === 'ArrowLeft') changeImage(-1);
            else if (e.key === 'ArrowRight') changeImage(1);
            else if (e.key === 'Escape') closeViewer();
        }

        function closeViewer() {
            if (viewerElement) {
                viewerElement.classList.remove('show');
                document.removeEventListener('keydown', handleKeydown);
                document.body.style.overflow = '';
                setTimeout(() => { viewerElement.remove(); viewerElement = null; }, 300);
            }
        }
    }

    // --- 画廊功能函数 ---
    function getCurrentImageIndex(galleryId) {
        const gallery = document.getElementById(galleryId);
        if (!gallery || gallery.children.length === 0) return 0;
        const itemWidth = gallery.children[0].getBoundingClientRect().width;
        const gap = parseInt(getComputedStyle(gallery).gap) || 0;
        return Math.round(gallery.scrollLeft / (itemWidth + gap));
    }

    function showImage(galleryId, index) {
        const gallery = document.getElementById(galleryId);
        const image = gallery.children[index];
        if (image) {
            gallery.scrollTo({ left: image.offsetLeft, behavior: 'smooth' });
            resetAutoScroll(gallery);
        }
    }

    function scrollGallery(galleryId, direction) {
        const gallery = document.getElementById(galleryId);
        const newIndex = (getCurrentImageIndex(galleryId) + direction + gallery.children.length) % gallery.children.length;
        showImage(galleryId, newIndex);
    }

    function resetAutoScroll(gallery) {
        clearInterval(gallery.dataset.autoScroll);
        gallery.dataset.autoScroll = setInterval(() => scrollGallery(gallery.id, 1), 5000);
    }

    function updateIndicators(galleryId) {
        const indicatorsContainer = document.getElementById(`indicators-${galleryId.split('-')[1]}`);
        if (!indicatorsContainer) return;
        const activeIndex = getCurrentImageIndex(galleryId);
        indicatorsContainer.querySelectorAll('.indicator').forEach((dot, index) => {
            dot.classList.toggle('active', index === activeIndex);
        });
    }

    // --- 语言应用核心函数 (已重写和修复) ---
    function applyLanguage(lang) {
        const langMap = {'ru': 'ru-RU', 'zh': 'zh-CN', 'en': 'en-US'};
        document.documentElement.lang = langMap[lang] || 'ru-RU';

        // 翻译带有 data-* 属性的元素
        document.querySelectorAll('[data-ru]').forEach(element => {
            if (element.dataset[lang] === undefined) return;
            const rawData = element.dataset[lang];

            // 为使用了 tojson 过滤器的元素进行JSON解析
            if (element.classList.contains('highlight-item') || element.classList.contains('news-title') || element.classList.contains('news-content')) {
                let content;
                try {
                    content = JSON.parse(rawData);
                } catch (e) {
                    console.error("无法解析JSON数据:", rawData, "在元素:", element);
                    content = rawData; // 解析失败则使用原始数据
                }

                if (element.classList.contains('highlight-item')) {
                    const span = element.querySelector('span');
                    if (span) {
                        const link = span.querySelector('a.source-link');
                        const linkHref = link ? link.href : '#';
                        span.innerHTML = `${content} <a href="${linkHref}" class="source-link"><i class="fas fa-arrow-up-right-from-square"></i></a>`;
                    }
                } else if (element.classList.contains('news-content')) {
                    const link = element.querySelector('a.source-link');
                    element.innerHTML = content;
                    if (link) element.appendChild(link); // 移动而不是克隆
                } else if (element.classList.contains('news-title')) {
                    element.innerHTML = content;
                }
            } else {
                // 对于其他简单元素（如统计数字、下拉选项），直接设置文本内容
                element.textContent = rawData;
            }
        });

        // 翻译固定的静态文本
        const translations = {
            ru: { highlights: "Основные моменты", copyright: "Авторское право © Atom 2025. Все права защищены", updated: "Последнее обновление: " },
            zh: { highlights: "重点内容", copyright: "版权所有 © Atom 2025。保留所有权利", updated: "最后更新: " },
            en: { highlights: "Highlights", copyright: "Copyright © Atom 2025. All Rights Reserved", updated: "Last updated: " }
        };

        const staticElements = {
            highlightsText: translations[lang].highlights,
            copyrightText: translations[lang].copyright
        };

        for (const id in staticElements) {
            const el = document.getElementById(id);
            if (el) el.textContent = staticElements[id];
        }

        const updateText = document.getElementById('updateText');
        if (updateText) {
             // 保持原始的更新时间不变
            const updateTime = '2025-08-30 12:08:34';
            updateText.textContent = translations[lang].updated + updateTime;
        }
    }
</script>
</body>
</html>