<!DOCTYPE html>
<html lang="ru-RU" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV News</title>
    <!-- 图标库 Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 优化字体: Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- 主题颜色变量 --- */
:root, html[data-theme="dark"] {
    --brand-cyan: #00FFFF; /* 定义固定的青色 */
    --bg-main: #0d1117;
    --card-bg: #161b22;
    --card-border: #30363d;
    --text-primary: #c9d1d9;
    --text-secondary: #8b949e;
    --text-accent: #58a6ff;
    --accent-color: #00FFFF;
    --button-bg: #21262d;
    --indicator-active: #00FFFF; /* 将活动指示点默认也改为青色 */
    --indicator-inactive: #30363d;
    --stats-bg: rgba(33, 38, 45, 0.5);
    --nav-bg: rgba(33, 38, 45, 0.9);
    --nav-hover-bg: var(--accent-color);
    --nav-hover-color: var(--bg-main);
}

html[data-theme="light"] {
    --bg-main: #ffffff;
    --card-bg: #fdfdfd;
    --card-border: #e1e4e8;
    --text-primary: #24292e;
    --text-secondary: #586069;
    --text-accent: #0366d6;
    --accent-color: #007BFF;
    --button-bg: #f6f8fa;
    --indicator-active: #007BFF;
    --indicator-inactive: #d1d5da;
    --stats-bg: rgba(246, 248, 250, 0.8);
    --nav-bg: rgba(255, 255, 255, 0.8);
    --nav-hover-bg: var(--accent-color);
    --nav-hover-color: #ffffff;
}

html[data-theme="gray"] {
    --bg-main: #f0f2f5;
    --card-bg: #ffffff;
    --card-border: #d9d9d9;
    --text-primary: #333333;
    --text-secondary: #666666;
    --text-accent: #0056b3;
    --accent-color: #006ae0;
    --button-bg: #e9ecef;
    --indicator-active: #0056b3;
    --indicator-inactive: #b0b0b0;
    --stats-bg: rgba(233, 236, 239, 0.8);
    --nav-bg: rgba(233, 236, 239, 0.9);
    --nav-hover-bg: var(--accent-color);
    --nav-hover-color: #ffffff;
}


/* --- 浮动控制面板样式 --- */
.top-controls {
    padding: 10px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative; /* 默认相对定位 */
    z-index: 1000;
    transition: all 0.3s ease-in-out;
}

/* 滚动时应用的粘性定位样式 */
.top-controls.sticky {
    position: fixed; /* 固定在视口顶部 */
    top: 0;
    left: 0;
    right: 0;
    background-color: var(--nav-bg); /* 带透明度的背景 */
    backdrop-filter: blur(5px); /* 毛玻璃效果 */
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 8px 15px;
}

.theme-selector select, .language-selector select {
    padding: 6px 10px;
    border-radius: 5px;
    border: 1px solid var(--card-border);
    background: var(--button-bg);
    color: var(--text-accent);
    font-weight: 500;
    cursor: pointer;
    outline: none;
    font-size: 0.9rem;
    transition: background 0.3s, color 0.3s, border-color 0.3s;
}
/* -------------------------------------------------- */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    /* 优化：添加 Inter 字体，并保留系统字体作为备用 */
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
                 'Helvetica Neue', Arial, sans-serif;
    background: var(--bg-main);
    color: var(--text-primary);
    line-height: 1.5;
    padding: 0 15px 15px;
    max-width: 1200px;
    margin: 0 auto;
    min-height: 100vh;
    font-size: 15px;
    position: relative;
    transition: background 0.3s, color 0.3s;
}

.header-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin-bottom: 0; /* [修改] 移除它自己的下边距，不再推开下面的元素 */
    margin-top: 15px;
}

.header-container h2 { font-size: 1.3rem; font-weight: 700; color: var(--accent-color); }
.highlights h2, .news-title { font-size: 1.1rem; font-weight: 600; color: var(--text-primary); }
.highlight-item { font-size: 0.95rem; font-weight: 500; }

.news-content {
    font-size: 0.9rem;
    font-weight: 400;
    margin-bottom: 20px;
    color: var(--text-secondary);
    line-height: 1.7;
    background: var(--card-bg);
    padding: 15px;
    border: 1px solid var(--card-border);
    border-radius: 8px;
    /* [修改] 使用 overflow-wrap 作为备用方案，并开启自动连字符 */
    overflow-wrap: break-word;
    word-wrap: break-word; /* 兼容旧版浏览器 */
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
    hyphens: auto;
    word-break: normal; /* [修改] 恢复到 normal，让 hyphens 生效 */
}
footer { font-size: 0.75rem; font-weight: 400; color: var(--text-secondary); }
.header-logo {
width: 100%; /* 宽度占满容器 */
max-width: 450px; /* 在大屏幕上限制最大宽度，防止过大 */
height: auto; /* 高度自动调整，保持长宽比不变 */
margin-bottom: 15px; /* 增加与下方内容的间距 */
}
.header-logo path { transition: fill 0.3s; }
header { margin: 20px 0; padding-bottom: 15px; border-bottom: 2px solid var(--accent-color); position: relative; }
h1 { color: var(--accent-color); font-size: 2.2rem; margin-bottom: 8px; text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1); position: relative; display: inline-block; padding: 0 15px; }
h1:after { content: ''; position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 80px; height: 3px; background: var(--accent-color); border-radius: 2px; }

.stats-bar {
    display: flex;
    justify-content: center;
    gap: 40px;
    background: none;
    border: none;
    box-shadow: none;
    padding: 0;
    /* [修改] 大幅减少上边距，让它紧随Logo；保持合理的下边距 */
    margin: 15px 0 25px 0;
    font-size: 0.8rem;
}

.meta-info {
    font-size: 0.8rem;
    display: flex;
    justify-content: center; /* 居中对齐 */
    padding: 4px 0;          /* 调整垂直内边距，使其更紧凑 */
    margin: 0 0 10px 0;      /* 调整外边距，主要保留下方间距 */
    background: none;        /* 去掉背景 */
    border: none;            /* 去掉边框 */
    box-shadow: none;        /* 去掉阴影 */
}

.stat-item { display: flex; align-items: center; gap: 6px; color: var(--text-secondary); }
.category { font-weight: bold; background: var(--button-bg); padding: 4px 8px; border-radius: 20px; display: inline-flex; align-items: center; gap: 6px; color: var(--text-accent); border: 1px solid var(--card-border); }
.date { display: flex; align-items: center; gap: 6px; font-weight: 400; color: var(--text-secondary); }
.date i {
    color: var(--brand-cyan); /* 使用品牌青色 */
    font-size: 1em;
}
.highlights {
    /* ...前面的 background, border-radius, padding, animation 等保持不变... */
    background: linear-gradient(145deg, #1c222c, #161b22);
    border-radius: 12px;
    padding: 20px;
    position: relative;
    border: none;
    box-shadow: 0 0 12px rgba(0, 255, 255, 0.2), 0 0 20px rgba(0, 255, 255, 0.15);
    animation: pulse-glow 2.8s infinite ease-in-out;
    transition: all 0.3s ease-in-out;

    /* [核心修改] 将下外边距增加到 80px，为分割线创造巨大的呼吸空间 */
    margin-bottom: 80px;
}
html[data-theme="light"] .highlights {
    background: linear-gradient(145deg, #fdfdfd, #f9f9f9);
}
html[data-theme="gray"] .highlights {
    background: linear-gradient(145deg, #ffffff, #f7f7f7);
}
@keyframes pulse-glow {
    /* "静止"状态：辉光很弱 */
    0%, 100% {
        box-shadow: 0 0 12px rgba(0, 255, 255, 0.2), 0 0 20px rgba(0, 255, 255, 0.15);
    }
    /* "脉冲"顶峰：辉光非常强烈和宽广 */
    50% {
        /* [修改] 大幅增强了透明度、模糊和扩散范围，视觉冲击力更强 */
        box-shadow: 0 0 25px rgba(0, 255, 255, 0.7), 0 0 50px 4px rgba(0, 255, 255, 0.5);
    }
}
.highlights::after {
    content: '';
    position: absolute;
    /* [核心修改] 将 bottom 设为 -40px，使其正好位于 80px 外边距的正中间 */
    bottom: -40px;
    left: 10%;
    right: 10%;
    width: 80%;
    height: 2px;
    background: linear-gradient(to right,
        transparent,
        rgba(0, 255, 255, 0.6),
        transparent
    );
    opacity: 0.8;
}
.highlights h2 {
    color: var(--brand-cyan);
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px dashed var(--card-border);
    display: flex;
    align-items: center;
    justify-content: center; /* 使标题和图标整体居中 */
    gap: 8px;
}
.highlights h2 i {
    color: var(--brand-cyan); /* 固定图标颜色 */
}
.highlight-item {
    font-size: 0.95rem;
    font-weight: 500;
    margin: 10px 0;
    padding: 8px;
    background: var(--button-bg);
    border-radius: 6px;
    display: flex;
    align-items: center; /* 垂直居中对齐 */
    gap: 10px; /* 为圆点和文本之间添加间距 */
    color: var(--text-primary);
    transition: all 0.3s ease;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    /* [修改] 开启自动连字符，并设置备用方案 */
    overflow-wrap: break-word;
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
    hyphens: auto;
    word-break: normal;
}
.highlight-item::before {
    content: '•'; /* 定义内容为圆点 */
    color: var(--text-primary); /* 颜色跟随主题的主要文本颜色 */
    font-size: 1.5rem; /* 圆点大小 */
    line-height: 1; /* 防止影响布局行高 */
}
.highlights .source-link:hover {
    color: var(--brand-cyan); /* 鼠标悬浮时变为品牌青色 */
}
html[data-theme="dark"] .highlight-item:hover { background: rgba(0, 255, 255, 0.1); transform: translateX(5px); box-shadow: 0 3px 8px rgba(0, 255, 255, 0.1); }
html[data-theme="light"] .highlight-item:hover { background: rgba(0, 123, 255, 0.1); transform: translateX(5px); box-shadow: 0 3px 8px rgba(0, 123, 255, 0.1); }
html[data-theme="gray"] .highlight-item:hover { background: rgba(0, 86, 179, 0.1); transform: translateX(5px); box-shadow: 0 3px 8px rgba(0, 86, 179, 0.1); }
.news-item { background: var(--card-bg); border-radius: 12px; padding: 15px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); border: 1px solid var(--card-border); position: relative; overflow: hidden; }
.news-item:first-child { border-top: none; }
.news-title {
    color: var(--text-primary);
    margin: 10px 0 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--card-border);
    line-height: 1.3;
    /* [修改] 开启自动连字符，并设置备用方案 */
    overflow-wrap: break-word;
    -webkit-hyphens: auto;
    -ms-hyphens: auto;
    hyphens: auto;
    word-break: normal;
}
.image-gallery-container {
    margin: 20px 0;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
}
.image-gallery {
    display: flex;
    overflow-x: auto;
    scroll-behavior: smooth;
    gap: 15px;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-snap-type: x mandatory;
}
.image-gallery::-webkit-scrollbar { display: none; }
.image-container {
    flex: 0 0 100%;
    width: 100%;
    aspect-ratio: 16 / 10;
    background: var(--button-bg);
    border-radius: 12px;
    overflow: hidden;
    scroll-snap-align: center;
    position: relative;
    cursor: zoom-in; /* 改变鼠标指针，提示可点击 */
}
.image-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
}
.image-container:hover img {
    transform: scale(1.05);
}

/* 优化点2: 根据用户要求，隐藏主图库的左右导航按钮 */
.gallery-nav {
    display: none;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background: var(--nav-bg);
    backdrop-filter: blur(5px);
    border-radius: 50%;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
    color: var(--text-primary);
    font-size: 1rem;
    border: 1px solid transparent;
}
.gallery-nav:hover {
    background: var(--accent-color);
    color: var(--bg-main);
    transform: translateY(-50%) scale(1.1);
}
.gallery-nav.prev { left: 15px; }
.gallery-nav.next { right: 15px; }
.gallery-indicators {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
    gap: 8px;
    z-index: 10;
    padding: 5px 10px;
    background: var(--nav-bg);
    backdrop-filter: blur(5px);
    border-radius: 20px;
}
.indicator {
    width: 20px;
    height: 4px;
    border-radius: 2px;
    background: var(--indicator-inactive);
    cursor: pointer;
    transition: all 0.4s ease;
}
.indicator.active {
    background: var(--brand-cyan); /* 使用品牌青色 */
    width: 30px;
}

/* --- 全屏图片查看器（Lightbox）样式 --- */
.fullscreen-viewer {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: rgba(0,0,0,0.9);
    backdrop-filter: blur(8px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
    -webkit-user-select: none; /* 禁止文本选中 */
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.fullscreen-viewer.show {
    opacity: 1;
    visibility: visible;
}
.fullscreen-viewer img {
    max-width: 90%;
    max-height: 85%;
    object-fit: contain;
    transition: transform 0.3s ease-out, opacity 0.3s ease-out; /* 为图片切换添加过渡 */
    transform: scale(1);
    opacity: 1;
}
/* 图片切换时的动画效果 */
.fullscreen-viewer img.fade-out {
    transform: scale(0.95);
    opacity: 0;
}
/* 关闭按钮 */
.fullscreen-close {
    position: absolute;
    top: 20px;
    right: 25px;
    width: 40px;
    height: 40px;
    font-size: 24px;
    color: #fff;
    background: rgba(40, 40, 40, 0.7);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.3s, background-color 0.3s;
}
.fullscreen-close:hover {
    transform: rotate(90deg);
    background-color: rgba(255, 0, 0, 0.8);
}
/* 左右导航箭头 (悬浮时保留) */
.fullscreen-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 45px;
    height: 45px;
    font-size: 22px;
    color: #fff;
    background: rgba(40, 40, 40, 0.6);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.3s, background-color 0.3s;
}
.fullscreen-nav:hover {
    transform: translateY(-50%) scale(1.1);
    background: var(--accent-color);
}
.fullscreen-nav.prev { left: 20px; }
.fullscreen-nav.next { right: 20px; }
/* --- 全屏查看器样式结束 --- */

.news-content p { margin-bottom: 12px; }
.source-link {
    display: inline-flex; /* 确保 transform 生效 */
    align-items: center;
    text-decoration: none;
    color: var(--text-accent);
    font-weight: 600;
    transition: all 0.3s ease;
    padding: 0;
    background: none;
    box-shadow: none;
    font-size: 0.95em;
    margin-left: 4px;
    vertical-align: baseline;
    line-height: 1;
    margin-top: 0 !important;
}
.source-link:hover {
    color: var(--brand-cyan); /*统一悬浮颜色为品牌青色 */
    text-decoration: underline;
    transform: scale(1.25); /* [新增] 鼠标悬浮时放大 */
}
.source-link i { font-size: 0.95em; margin-left: 3px; vertical-align: middle; }
footer { text-align: center; margin-top: 40px; padding: 20px; border-top: 1px solid var(--card-border); background: var(--card-bg); border-radius: 12px; }

/* --- 返回顶部按钮样式 --- */
#back-to-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 45px;
    height: 45px;
    background-color: var(--accent-color);
    color: var(--nav-hover-color);
    border: none;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 999;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s, transform 0.3s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    font-size: 1.2rem;
}
#back-to-top.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}
#back-to-top:hover {
    transform: scale(1.1);
}

@media (max-width: 768px) {

    /*
     * 逻辑1: 整体收紧页面两侧间距
     */
    body {
        padding-left: 10px;
        padding-right: 10px;
    }

    /*
     * 逻辑2: 收紧 Highlights (要闻) 区域的间距
     */
    .highlights {
        padding: 20px 15px;
    }

    /*
     * 逻辑3: 优化新闻卡片布局
     */
    .news-item {
        padding: 15px 12px;
        border: 1px solid transparent;
        background-clip: padding-box;
        border-image: linear-gradient(to bottom right, var(--card-border), transparent) 1;
    }

    /*
     * 逻辑4: 让新闻标题“边缘出血”，并减少其下边距
     */
    .news-title {
        margin: -15px -12px 8px -12px;
        padding: 12px 12px;
        background: linear-gradient(to right, rgba(0, 255, 255, 0.05), transparent);
        border-radius: 12px 12px 0 0; /* [修改] 为移动端标题的左上和右上角添加圆角 */
    }
    html[data-theme="light"] .news-title {
        background: linear-gradient(to right, rgba(0, 123, 255, 0.05), transparent);
    }
    html[data-theme="gray"] .news-title {
        background: linear-gradient(to right, rgba(0, 86, 179, 0.05), transparent);
    }

    /*
     * 逻辑5: 优化日期（meta-info）的位置和间距
     */
    .meta-info {
        justify-content: center;    /* [最终修正] 将对齐方式从 flex-end 改回 center，使其恢复居中 */
        padding: 0;
        margin: 0 0 15px 0;
    }

    /*
     * 逻辑6: 让图片库“边缘出血”
     */
    .image-gallery-container {
        margin-left: -12px;
        margin-right: -12px;
        margin-top: 0;
        border-radius: 12px;
        overflow: hidden;
    }

    /*
     * 逻辑7: 移除新闻正文自身的内边距
     */
    .news-content {
        padding: 0;
        margin-top: 15px;
        background: none;
        border: none;
    }
}

    </style>

</head>
<body>
<!-- 浮动控制元素的容器 -->
<div class="top-controls" id="top-controls">
    <div class="theme-selector">
        <select id="themeSelect">
            <option value="dark" data-ru="Темная" data-zh="深色" data-en="Dark">深色</option>
            <option value="light" data-ru="Светлая" data-zh="浅色" data-en="Light">浅色</option>
            <option value="gray" data-ru="Серая" data-zh="灰色" data-en="Gray">灰色</option>
        </select>
    </div>
    <div class="language-selector">
        <select id="languageSelect">
            <option value="ru">Русский</option>
            <option value="zh">中文</option>
            <option value="en">English</option>
        </select>
    </div>
</div>

<div class="header-container" id="main-header">
    <svg class="header-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 300" width="700" height="300">
      <defs>
        <style>
          /*
             注意: 为了达到最佳效果，建议您加载logo所使用的精确字体。
             这里的 'Arial', 'Helvetica' 是一个通用的粗体无衬线字体作为替代。
          */
          .main-text-font {
            font-family: 'Arial', 'Helvetica', sans-serif;
            font-size: 48px;
            font-weight: 900; /* 非常粗的字重 */
            letter-spacing: 2px;
          }
          .tagline-font {
            font-family: 'Arial', 'Helvetica', sans-serif;
            font-size: 18px;
            font-weight: normal;
            letter-spacing: 0.5px;
          }
          .cyan-color {
            fill: #00E5E5; /* 青色 */
          }
          .black-color {
            fill: #000000; /* 黑色 */
          }
        </style>
      </defs>

      <!-- 第一行：图标 -->
      <g id="logo-icon" transform="translate(350, 80)">
        <!-- 中间的圆圈 -->
        <circle class="cyan-color" cx="0" cy="0" r="10"/>
        <!-- 左边的形状 (指向左侧，右边是内凹弧形) -->
        <path class="cyan-color" d="M -55,0 L -25,-22 C -40,0 -40,0 -25,22 L -55,0 Z" />
        <!-- 右边的形状 (指向右侧，左边是内凹弧形) -->
        <path class="cyan-color" d="M 55,0 L 25,-22 C 40,0 40,0 25,22 L 55,0 Z" />
      </g>

      <!-- 第二行：主要文字 "ATOM INTELLIGENCE" -->
      <text x="50%" y="185" text-anchor="middle" class="main-text-font">
        <tspan class="black-color">ATOM INTELLIGENCE</tspan>
      </text>

      <!-- 第三行：标语 -->
      <text x="50%" y="235" text-anchor="middle" class="tagline-font black-color">
        Transforming Insights, Powering Innovation
      </text>

    </svg>
</div>

<!-- 新增：在这里添加 stats-bar 统计信息栏 -->
<div class="stats-bar">
    <div class="stat-item">
        <i class="fas fa-file-word fa-beat-fade"></i>
        <span>
            <span id="wordsCount"
                  data-ru="163"
                  data-zh="243"
                  data-en="159">
                163
            </span>
            <span id="wordsText"
                  data-ru="Слов"
                  data-zh="字"
                  data-en="Words">
                Слов
            </span>
        </span>
    </div>
    <div class="stat-item">
        <i class="fas fa-hourglass-half fa-spin"></i>
        <span>
            <span id="minsCount"
                  data-ru="1"
                  data-zh="1"
                  data-en="1">
                1
            </span>
            <span id="minsText"
                  data-ru="Мин"
                  data-zh="分钟"
                  data-en="Mins">
                Мин
            </span>
        </span>
    </div>
</div>
<!-- stats-bar 添加结束 -->


<!-- 主体内容 -->

<section class="highlights">
    <h2><i class="fas fa-star"></i> <span id="highlightsText">Основные моменты</span>
    </h2>
        
        <div class="highlight-item" data-ru="Продажи полярных автомобилей рухнули и находятся на грани ухода из Китая" data-zh="极星汽车销量暴跌，濒临退出中国" data-en="Polestar's sales plummet, teetering on the brink of exiting China">
            <!-- 修改下面这一行 -->
            <span>Продажи полярных автомобилей рухнули и находятся на грани ухода из Китая <a href="https://news.qq.com/rain/a/20250810A02T1F00" class="source-link"><i class="fas fa-arrow-up-right-from-square"></i></a></span>
        </div>
        
        <div class="highlight-item" data-ru="Электрификация грузовых автомобилей ускоряется, спрос в сегменте B2B доминирует" data-zh="物流车电动化加速，B端需求主导" data-en="Logistics vehicle electrification accelerates with business demand dominating">
            <!-- 修改下面这一行 -->
            <span>Электрификация грузовых автомобилей ускоряется, спрос в сегменте B2B доминирует <a href="https://auto.gasgoo.com/news/202508/10I70431100C501.shtml" class="source-link"><i class="fas fa-arrow-up-right-from-square"></i></a></span>
        </div>
        
        <div class="highlight-item" data-ru="Продажи GAC Motor за январь–июль превысили 1 миллион единиц" data-zh="广汽1-7月销量破百万" data-en="GAC Motor's January-July sales exceed 1 million units">
            <!-- 修改下面这一行 -->
            <span>Продажи GAC Motor за январь–июль превысили 1 миллион единиц <a href="https://www.autohome.com.cn/news/202508/1308088.html#pvareaid=102624" class="source-link"><i class="fas fa-arrow-up-right-from-square"></i></a></span>
        </div>
        
</section>



<article class="news-item">
    <h2 class="news-title" data-ru="Продажи Polestar резко упали, бренд может покинуть китайский рынок" data-zh="极星汽车销量惨淡，或退出中国市场"
        data-en="Polestar's sales slump, may exit Chinese market">Продажи Polestar резко упали, бренд может покинуть китайский рынок</h2>
    <div class="meta-info">
            <span class="date">
                <i class="fas fa-calendar-alt"></i>
                2025-08-10
            </span>
    </div>

    
    <div class="image-gallery-container">
        <div class="image-gallery" id="gallery-1">
            
            <div class="image-container">
                <img src="https://inews.gtimg.com/om_bt/O0-5xp9HIrWNxBMSG2SbitLPAz_r29pJGNGlaQEug25n0AA/641" alt="新闻配图" loading="lazy">
            </div>
            
        </div>
        <!-- 注意：下面的导航按钮已通过CSS的 display:none; 隐藏 -->
        <div class="gallery-nav prev" onclick="scrollGallery('gallery-1', -1)">
            <i class="fas fa-chevron-left"></i>
        </div>
        <div class="gallery-nav next" onclick="scrollGallery('gallery-1', 1)">
            <i class="fas fa-chevron-right"></i>
        </div>
        <div class="gallery-indicators" id="indicators-1"></div>
    </div>
    

    <div class="news-content" data-ru="Автомобили марки Polestar в июне продали всего 6 единиц, а за первое полугодие совокупные продажи не достигли 70 единиц. Бренд столкнулся с риском ухода с китайского рынка, частыми проблемами с послепродажным обслуживанием и сложной финансовой ситуацией."
         data-zh="极星汽车6月销量仅6辆，上半年累计不足70辆，面临退出中国市场的风险，且售后问题频发，财务状况堪忧。" data-en="Polestar sold only 6 vehicles in June, with cumulative sales of less than 70 units in the first half of the year, facing the risk of exiting the Chinese market. The brand also suffers from frequent after-sales issues and concerning financial conditions.">
        Автомобили марки Polestar в июне продали всего 6 единиц, а за первое полугодие совокупные продажи не достигли 70 единиц. Бренд столкнулся с риском ухода с китайского рынка, частыми проблемами с послепродажным обслуживанием и сложной финансовой ситуацией.
        <a href="https://news.qq.com/rain/a/20250810A02T1F00" class="source-link" style="display: inline-block; margin-top: 15px;"><i class="fas fa-arrow-up-right-from-square"></i></a>
    </div>
</article>

<article class="news-item">
    <h2 class="news-title" data-ru="Электрификация меняет структуру рынка логистических автомобилей, спрос со стороны бизнеса стимулирует рост сектора новой энергетики" data-zh="电动化重塑物流车市场结构，B端需求推动新能源增长"
        data-en="Electrification Reshapes Commercial Vehicle Market Structure, Business Demand Drives New Energy Growth">Электрификация меняет структуру рынка логистических автомобилей, спрос со стороны бизнеса стимулирует рост сектора новой энергетики</h2>
    <div class="meta-info">
            <span class="date">
                <i class="fas fa-calendar-alt"></i>
                2025-08-10
            </span>
    </div>

    
    <div class="image-gallery-container">
        <div class="image-gallery" id="gallery-2">
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014643.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014673.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014702.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014727.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014766.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014796.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014826.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014854.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014890.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014924.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905014966.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015002.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015037.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015112.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015151.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015193.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015332.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015415.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015498.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015534.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015565.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015612.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015646.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015687.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015721.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015781.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015812.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015849.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015884.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015913.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015940.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015973.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905015995.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905020023.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="http://imagecn.gasgoo.com/moblogo/news/UEditor/700-X/20250809/0905020062.jpg" alt="新闻配图" loading="lazy">
            </div>
            
        </div>
        <!-- 注意：下面的导航按钮已通过CSS的 display:none; 隐藏 -->
        <div class="gallery-nav prev" onclick="scrollGallery('gallery-2', -1)">
            <i class="fas fa-chevron-left"></i>
        </div>
        <div class="gallery-nav next" onclick="scrollGallery('gallery-2', 1)">
            <i class="fas fa-chevron-right"></i>
        </div>
        <div class="gallery-indicators" id="indicators-2"></div>
    </div>
    

    <div class="news-content" data-ru="В первой половине этого года уровень проникновения новых энергетических решений на рынке коммерческого транспорта вырос до 27,4%. Рост электрификации стимулируется спросом со стороны B2B-сегмента, тогда как замена автопарка в C2C-сегменте идёт медленно. Изменения в потребительских привычках электронной коммерции увеличили спрос на городские грузоперевозки, расширив сферу применения фургонов (VAN-класса)."
         data-zh="今年上半年物流车市场新能源渗透率提升至27.4%，B端需求推动电动化增长，C端置换缓慢。电商消费习惯改变带动城市配送需求，VAN类车适用空间扩大。" data-en="In the first half of this year, the penetration rate of new energy vehicles in the logistics vehicle market rose to 27.4%, with B-end demand driving electrification growth while C-end replacement remained slow. Changes in e-commerce consumption habits have boosted urban distribution demand, expanding the suitable applications for VAN-type vehicles.">
        В первой половине этого года уровень проникновения новых энергетических решений на рынке коммерческого транспорта вырос до 27,4%. Рост электрификации стимулируется спросом со стороны B2B-сегмента, тогда как замена автопарка в C2C-сегменте идёт медленно. Изменения в потребительских привычках электронной коммерции увеличили спрос на городские грузоперевозки, расширив сферу применения фургонов (VAN-класса).
        <a href="https://auto.gasgoo.com/news/202508/10I70431100C501.shtml" class="source-link" style="display: inline-block; margin-top: 15px;"><i class="fas fa-arrow-up-right-from-square"></i></a>
    </div>
</article>

<article class="news-item">
    <h2 class="news-title" data-ru="Группа GAC (Guangzhou Automobile Group) продала более 1 миллиона автомобилей за первые 7 месяцев года." data-zh="广汽集团1-7月累计终端销量超100万辆"
        data-en="GAC Group's cumulative retail sales exceed 1 million units from January to July">Группа GAC (Guangzhou Automobile Group) продала более 1 миллиона автомобилей за первые 7 месяцев года.</h2>
    <div class="meta-info">
            <span class="date">
                <i class="fas fa-calendar-alt"></i>
                2025-08-09
            </span>
    </div>

    
    <div class="image-gallery-container">
        <div class="image-gallery" id="gallery-3">
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/car2/cardfs/product/g33/M04/3B/E6/1200x0_1_autohomecar__ChxpVWiEmIKAaHdDACN5CAcre8c486.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/car2/cardfs/product/g31/M0B/86/FB/1200x0_1_autohomecar__ChxoHmf3zbSAUCEkADmvLJdh2Gc241.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/car3/cardfs/product/g28/M05/A6/F0/1200x0_1_autohomecar__ChxkmmhqEeSALuQ_ABcSpkSV9dM532.jpg" alt="新闻配图" loading="lazy">
            </div>
            
            <div class="image-container">
                <img src="https://g.autoimg.cn/@img/car2/cardfs/product/g32/M06/55/84/1200x0_1_autohomecar__Chtk2WcdpV2AZN1xAC1zcZ8Hzm0908.jpg" alt="新闻配图" loading="lazy">
            </div>
            
        </div>
        <!-- 注意：下面的导航按钮已通过CSS的 display:none; 隐藏 -->
        <div class="gallery-nav prev" onclick="scrollGallery('gallery-3', -1)">
            <i class="fas fa-chevron-left"></i>
        </div>
        <div class="gallery-nav next" onclick="scrollGallery('gallery-3', 1)">
            <i class="fas fa-chevron-right"></i>
        </div>
        <div class="gallery-indicators" id="indicators-3"></div>
    </div>
    

    <div class="news-content" data-ru="В июле группа GAC (Guangzhou Automobile Group) реализовала 147 000 автомобилей, а с января по июль совокупные продажи превысили 1 миллион единиц. Экспорт собственных брендов вырос на 45% по сравнению с прошлым годом, при этом несколько моделей показали выдающиеся результаты."
         data-zh="广汽集团7月终端销量14.7万辆，1-7月累计终端销量超100万辆，自主品牌出口同比增长45%，多款车型表现亮眼。" data-en="GAC Group sold 147,000 vehicles in July, with cumulative terminal sales exceeding 1 million units from January to July. Its proprietary brands saw a 45% year-on-year growth in exports, with multiple models demonstrating strong performance.">
        В июле группа GAC (Guangzhou Automobile Group) реализовала 147 000 автомобилей, а с января по июль совокупные продажи превысили 1 миллион единиц. Экспорт собственных брендов вырос на 45% по сравнению с прошлым годом, при этом несколько моделей показали выдающиеся результаты.
        <a href="https://www.autohome.com.cn/news/202508/1308088.html#pvareaid=102624" class="source-link" style="display: inline-block; margin-top: 15px;"><i class="fas fa-arrow-up-right-from-square"></i></a>
    </div>
</article>


<footer>
    <p id="copyrightText">Авторское право © Atom 2025. Все права защищены</p>
    <p id="updateText">Последнее обновление: 2025-08-10 05:09:49</p>
</footer>

<!-- 返回顶部按钮 -->
<button id="back-to-top" title="返回顶部"><i class="fas fa-arrow-up"></i></button>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // 初始化所有功能
        initializeGalleries();
        initializeLanguage();
        initializeTheme();
        // 初始化功能更强的全屏查看器
        initializeFullscreenViewer();
        initializeScrollFeatures();
    });

    // --- 主题初始化 ---
    function initializeTheme() {
        const themeSelect = document.getElementById('themeSelect');
        const savedTheme = localStorage.getItem('selectedTheme') || 'light';
        applyTheme(savedTheme);
        themeSelect.value = savedTheme;
        themeSelect.addEventListener('change', function() {
            const newTheme = this.value;
            applyTheme(newTheme);
            localStorage.setItem('selectedTheme', newTheme);
        });
    }

    function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
    }

    // --- 语言初始化 ---
    function initializeLanguage() {
        const languageSelect = document.getElementById('languageSelect');
        const savedLang = localStorage.getItem('selectedLanguage') || 'ru';
        languageSelect.value = savedLang;
        applyLanguage(savedLang);
        languageSelect.addEventListener('change', function() {
            const lang = this.value;
            localStorage.setItem('selectedLanguage', lang);
            applyLanguage(lang);
        });
    }

    // --- 滚动特性初始化 ---
    function initializeScrollFeatures() {
        const topControls = document.getElementById('top-controls');
        const mainHeader = document.getElementById('main-header');
        const backToTopButton = document.getElementById('back-to-top');
        const scrollThreshold = mainHeader.offsetTop + mainHeader.offsetHeight;

        window.addEventListener('scroll', () => {
            if (window.scrollY > scrollThreshold) {
                topControls.classList.add('sticky');
            } else {
                topControls.classList.remove('sticky');
            }
            if (window.scrollY > 300) {
                backToTopButton.classList.add('show');
            } else {
                backToTopButton.classList.remove('show');
            }
        }, { passive: true });

        backToTopButton.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }

    // --- 画廊初始化 ---
    function initializeGalleries() {
        document.querySelectorAll('.image-gallery').forEach(gallery => {
            const galleryId = gallery.id;
            const indicatorsContainer = document.getElementById(`indicators-${galleryId.split('-')[1]}`);
            const imageContainers = gallery.querySelectorAll('.image-container');
            const imageCount = imageContainers.length;

            if (imageCount === 0 || !indicatorsContainer) return;

            const navContainer = gallery.closest('.image-gallery-container');
            // 如果图片少于等于1张，隐藏导航和指示器
            if (imageCount <= 1) {
                if(navContainer.querySelector('.gallery-nav.prev')) navContainer.querySelector('.gallery-nav.prev').style.display = 'none';
                if(navContainer.querySelector('.gallery-nav.next')) navContainer.querySelector('.gallery-nav.next').style.display = 'none';
                indicatorsContainer.style.display = 'none';
                return;
            }

            indicatorsContainer.innerHTML = '';
            for (let i = 0; i < imageCount; i++) {
                const indicator = document.createElement('div');
                indicator.classList.add('indicator');
                if (i === 0) indicator.classList.add('active');
                indicator.onclick = () => showImage(galleryId, i);
                indicatorsContainer.appendChild(indicator);
            }

            resetAutoScroll(gallery);

            let scrollTimer;
            gallery.addEventListener('scroll', () => {
                 clearTimeout(scrollTimer);
                 scrollTimer = setTimeout(() => {
                      updateIndicators(galleryId);
                 }, 150);
            }, { passive: true });
        });
    }

    // --- 全屏图片查看器（支持滑动和按钮）---
    function initializeFullscreenViewer() {
        // 全局变量，用于存储当前查看器的状态
        let currentImages = [];
        let currentIndex = 0;
        let viewerElement = null;
        let touchStartX = 0;
        let touchEndX = 0;

        // 为页面上所有图集中的图片容器添加点击事件
        document.querySelectorAll('.image-container').forEach((container, index) => {
            container.addEventListener('click', (e) => {
                const gallery = container.closest('.image-gallery');
                if (!gallery) return;

                // 获取图集内所有图片的URL
                currentImages = Array.from(gallery.querySelectorAll('img')).map(img => img.src);
                // 确定被点击图片在图集中的索引
                currentIndex = Array.from(gallery.children).indexOf(container);

                // 创建并显示查看器
                createViewer();
            });
        });

        // 创建查看器DOM结构
        function createViewer() {
            // 如果已存在，则先移除
            if (document.querySelector('.fullscreen-viewer')) {
                document.querySelector('.fullscreen-viewer').remove();
            }

            // 创建DOM元素
            viewerElement = document.createElement('div');
            viewerElement.className = 'fullscreen-viewer';
            viewerElement.innerHTML = `
                <div class="fullscreen-close" title="关闭">&times;</div>
                <div class="fullscreen-nav prev" title="上一张">&#10094;</div>
                <img src="" alt="全屏图片">
                <div class="fullscreen-nav next" title="下一张">&#10095;</div>
            `;
            document.body.appendChild(viewerElement);
            document.body.style.overflow = 'hidden'; // 禁止背景滚动

            // 添加事件监听
            viewerElement.querySelector('.fullscreen-close').addEventListener('click', closeViewer);
            viewerElement.querySelector('.fullscreen-nav.prev').addEventListener('click', () => changeImage(-1));
            viewerElement.querySelector('.fullscreen-nav.next').addEventListener('click', () => changeImage(1));

            // 触摸滑动事件
            viewerElement.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; }, { passive: true });
            viewerElement.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });

            // 键盘导航事件
            document.addEventListener('keydown', handleKeydown);

            // 显示第一张图
            showImageInViewer();

            // 延迟添加show类以触发CSS动画
            setTimeout(() => viewerElement.classList.add('show'), 10);
        }

        // 在查看器中显示图片
        function showImageInViewer() {
            if (!viewerElement) return;
            const img = viewerElement.querySelector('img');
            const prevNav = viewerElement.querySelector('.fullscreen-nav.prev');
            const nextNav = viewerElement.querySelector('.fullscreen-nav.next');

            img.src = currentImages[currentIndex];

            // 如果只有一张图，隐藏导航箭头
            if (currentImages.length <= 1) {
                prevNav.style.display = 'none';
                nextNav.style.display = 'none';
            } else {
                prevNav.style.display = 'flex';
                nextNav.style.display = 'flex';
            }
        }

        // 切换图片
        function changeImage(direction) {
            const img = viewerElement.querySelector('img');
            // 添加淡出效果
            img.classList.add('fade-out');

            setTimeout(() => {
                currentIndex += direction;
                // 循环播放
                if (currentIndex >= currentImages.length) {
                    currentIndex = 0;
                } else if (currentIndex < 0) {
                    currentIndex = currentImages.length - 1;
                }

                showImageInViewer();

                // 移除淡出效果，图片会以 transform: scale(1), opacity: 1 的状态出现
                img.classList.remove('fade-out');
            }, 300); // 等待淡出动画完成
        }

        // 处理滑动操作
        function handleSwipe() {
            // 设置滑动阈值，防止误触
            if (Math.abs(touchEndX - touchStartX) < 50) return;

            if (touchEndX < touchStartX) {
                // 向左滑动，看下一张
                changeImage(1);
            }
            if (touchEndX > touchStartX) {
                // 向右滑动，看上一张
                changeImage(-1);
            }
        }

        // 处理键盘事件
        function handleKeydown(e) {
            if (!viewerElement) return;
            if (e.key === 'ArrowLeft') {
                changeImage(-1);
            } else if (e.key === 'ArrowRight') {
                changeImage(1);
            } else if (e.key === 'Escape') {
                closeViewer();
            }
        }

        // 关闭查看器
        function closeViewer() {
            if (viewerElement) {
                viewerElement.classList.remove('show');
                document.removeEventListener('keydown', handleKeydown);
                document.body.style.overflow = ''; // 恢复背景滚动
                setTimeout(() => {
                    viewerElement.remove();
                    viewerElement = null;
                }, 300); // 等待关闭动画完成
            }
        }
    }


    // --- 画廊功能函数 ---
    function getCurrentImageIndex(galleryId) {
        const gallery = document.getElementById(galleryId);
        if (!gallery || gallery.children.length === 0) return 0;
        const scrollLeft = gallery.scrollLeft;
        const itemWidth = gallery.children[0].getBoundingClientRect().width;
        const gap = parseInt(getComputedStyle(gallery).gap) || 0;
        return Math.round(scrollLeft / (itemWidth + gap));
    }

    function showImage(galleryId, index) {
        const gallery = document.getElementById(galleryId);
        const image = gallery.children[index];
        if (!image) return;

        gallery.scrollTo({
            left: image.offsetLeft,
            behavior: 'smooth'
        });

        resetAutoScroll(gallery);
    }

    function scrollGallery(galleryId, direction) {
        const gallery = document.getElementById(galleryId);
        const currentIndex = getCurrentImageIndex(galleryId);
        let newIndex = currentIndex + direction;

        if (newIndex >= gallery.children.length) {
             newIndex = 0;
        } else if (newIndex < 0) {
             newIndex = gallery.children.length - 1;
        }
        showImage(galleryId, newIndex);
    }

    function resetAutoScroll(gallery) {
        clearInterval(gallery.dataset.autoScroll);
        gallery.dataset.autoScroll = setInterval(() => {
            scrollGallery(gallery.id, 1);
        }, 5000);
    }

    function updateIndicators(galleryId) {
        const indicatorsContainer = document.getElementById(`indicators-${galleryId.split('-')[1]}`);
        if (!indicatorsContainer) return;
        const activeIndex = getCurrentImageIndex(galleryId);
        indicatorsContainer.querySelectorAll('.indicator').forEach((dot, index) => {
            dot.classList.toggle('active', index === activeIndex);
        });
    }

    // --- 语言应用核心函数 ---
    function applyLanguage(lang) {
        const langMap = {'ru': 'ru-RU', 'zh': 'zh-CN', 'en': 'en-US'};
        document.documentElement.lang = langMap[lang] || 'ru-RU';

        document.querySelectorAll('[data-ru]').forEach(element => {
            if (element.dataset[lang]) {
                if (element.classList.contains('news-content')) {
                    const link = element.querySelector('.source-link');
                    element.innerHTML = element.dataset[lang];
                    if (link) element.appendChild(link.cloneNode(true));
                } else if (element.classList.contains('highlight-item')) {
                    const link = element.querySelector('.source-link');
                    const linkHref = link ? link.href : '#';
                    element.innerHTML = `${element.dataset[lang]} <a href="${linkHref}" class="source-link"><i class="fas fa-arrow-up-right-from-square"></i></a>`;
                } else {
                    element.textContent = element.dataset[lang];
                }
            }
        });

        document.querySelectorAll('#themeSelect option').forEach(option => {
            if (option.dataset[lang]) {
                option.textContent = option.dataset[lang];
            }
        });

        const translations = {
            ru: {
                highlights: "Основные моменты",
                copyright: "Авторское право © Atom 2025. Все права защищены",
                updated: "Последнее обновление: "
            },
            zh: {
                highlights: "重点内容",
                copyright: "版权所有 © Atom 2025。保留所有权利",
                updated: "最后更新: "
            },
            en: {
                highlights: "Highlights",
                copyright: "Copyright © Atom 2025. All Rights Reserved",
                updated: "Last updated: "
            }
        };

        const highlightsText = document.getElementById('highlightsText');
        const copyrightText = document.getElementById('copyrightText');
        const updateText = document.getElementById('updateText');

        if (highlightsText) highlightsText.textContent = translations[lang].highlights;
        if (copyrightText) copyrightText.textContent = translations[lang].copyright;
        if (updateText) {
            updateText.textContent = translations[lang].updated + '2025-08-10 05:09:49';
        }

        const categorySummary = document.getElementById('categorySummary');
        if (categorySummary) {
            switch(lang) {
                case 'ru':
                    categorySummary.textContent = "В автомобильной отрасли наблюдается разделение продаж, при этом растет проникновение новых энергетических транспортных средств для логистики.";
                    break;
                case 'zh':
                    categorySummary.textContent = "汽车行业销量分化，新能源物流车渗透率提升。";
                    break;
                case 'en':
                    categorySummary.textContent = "The automotive industry shows diverging sales trends, with new energy logistics vehicles achieving higher penetration rates.";
                    break;
            }
        }
    }
</script>
</body>
</html>