<!DOCTYPE html>
<html lang="ru-RU" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV News</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* 主题颜色变量 */
    :root, html[data-theme="dark"] {
        --bg-main: #0d1117;
        --card-bg: #161b22;
        --card-border: #30363d;
        --text-primary: #c9d1d9;
        --text-secondary: #8b949e;
        --text-accent: #58a6ff;
        --accent-color: #00FFFF;
        --button-bg: #21262d;
        --indicator-active: #00FFFF;
        --indicator-inactive: #30363d;
        --stats-bg: rgba(33, 38, 45, 0.5);
        --nav-bg: rgba(33, 38, 45, 0.9);
        --nav-hover-bg: var(--accent-color);
        --nav-hover-color: var(--bg-main);
    }

    html[data-theme="light"] {
        --bg-main: #ffffff;
        --card-bg: #fdfdfd;
        --card-border: #e1e4e8;
        --text-primary: #24292e;
        --text-secondary: #586069;
        --text-accent: #0366d6;
        --accent-color: #007BFF;
        --button-bg: #f6f8fa;
        --indicator-active: #007BFF;
        --indicator-inactive: #d1d5da;
        --stats-bg: rgba(246, 248, 250, 0.8);
        --nav-bg: rgba(255, 255, 255, 0.8);
        --nav-hover-bg: var(--accent-color);
        --nav-hover-color: #ffffff;
    }

    html[data-theme="gray"] {
        --bg-main: #f0f2f5;
        --card-bg: #ffffff;
        --card-border: #d9d9d9;
        --text-primary: #333333;
        --text-secondary: #666666;
        --text-accent: #0056b3;
        --accent-color: #006ae0;
        --button-bg: #e9ecef;
        --indicator-active: #0056b3;
        --indicator-inactive: #b0b0b0;
        --stats-bg: rgba(233, 236, 239, 0.8);
        --nav-bg: rgba(233, 236, 239, 0.9);
        --nav-hover-bg: var(--accent-color);
        --nav-hover-color: #ffffff;
    }

    /* 主题选择器 */
    .theme-selector {
        position: absolute;
        top: 15px;
        left: 15px;
        z-index: 1000;
    }

    /* 语言选择器 */
    .language-selector {
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 1000;
    }

    .theme-selector select, .language-selector select {
        padding: 6px 10px;
        border-radius: 5px;
        border: 1px solid var(--card-border);
        background: var(--button-bg);
        color: var(--text-accent);
        font-weight: 500;
        cursor: pointer;
        outline: none;
        font-size: 0.9rem;
        transition: background 0.3s, color 0.3s, border-color 0.3s;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    /* 基础样式 */
    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
                     'Helvetica Neue', Arial, sans-serif;
        background: var(--bg-main);
        color: var(--text-primary);
        line-height: 1.5;
        padding: 15px;
        max-width: 1200px;
        margin: 0 auto;
        min-height: 100vh;
        font-size: 15px;
        position: relative;
        transition: background 0.3s, color 0.3s;
    }

    .header-container h2 { /* category_summary */
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--accent-color);
    }

    .highlights h2, .news-title { /* highlights标题和news.summary_short */
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-primary);
    }

    .highlight-item { /* 高亮项目文本 */
        font-size: 0.95rem;
        font-weight: 500;
    }

    .news-content { /* 新闻详细内容 */
        font-size: 0.9rem;
        font-weight: 400;
        margin-bottom: 20px;
        color: var(--text-secondary);
        line-height: 1.7;
        background: var(--card-bg);
        padding: 15px;
        hyphens: auto;
        overflow-wrap: break-word;
        word-wrap: break-word;
        word-break: break-word;
        border: 1px solid var(--card-border);
        border-radius: 8px;
    }

    footer { /* 页脚 */
        font-size: 0.75rem;
        font-weight: 400;
        color: var(--text-secondary);
    }

    .header-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        margin-bottom: 15px;
    }

    .header-logo {
        width: 80px;
        height: 80px;
        margin-bottom: 5px;
    }

    /* Стили для логотипа были изменены, чтобы цвет не зависел от темы */
    .header-logo path {
        transition: fill 0.3s;
    }

    header {
        margin: 20px 0;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--accent-color);
        position: relative;
    }

    h1 {
        color: var(--accent-color);
        font-size: 2.2rem;
        margin-bottom: 8px;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        position: relative;
        display: inline-block;
        padding: 0 15px;
    }

    h1:after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background: var(--accent-color);
        border-radius: 2px;
    }

    .stats-bar, .meta-info {
        font-size: 0.8rem;
        display: flex;
        justify-content: space-between;
        padding: 8px;
        background: var(--stats-bg);
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        margin: 8px 0;
        border: 1px solid var(--card-border);
    }

    .stat-item {
        display: flex;
        align-items: center;
        gap: 6px;
        color: var(--text-secondary);
    }

    .category {
        font-weight: bold;
        background: var(--button-bg);
        padding: 4px 8px;
        border-radius: 20px;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        color: var(--text-accent);
        border: 1px solid var(--card-border);
    }

    .category i {
        font-size: 0.8em;
    }

    .date {
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 400;
        color: var(--text-secondary);
    }

    .date i {
        color: var(--accent-color);
        font-size: 1em;
    }

    .highlights {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 25px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        border: 1px solid var(--card-border);
    }

    .highlights h2 {
        color: var(--accent-color);
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px dashed var(--card-border);
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .highlights h2 i {
        color: var(--accent-color);
    }

    .highlights h2:before {
        content: '';
        display: block;
        width: 6px;
        height: 28px;
        background: var(--accent-color);
        border-radius: 3px;
    }

    .highlight-item {
        font-size: 0.95rem;
        font-weight: 500;
        margin: 10px 0;
        padding: 8px;
        background: var(--button-bg);
        border-left: 3px solid var(--accent-color);
        border-radius: 0 6px 6px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        color: var(--text-primary);
    }

    html[data-theme="dark"] .highlight-item:hover {
        background: rgba(0, 255, 255, 0.1);
        transform: translateX(5px);
        box-shadow: 0 3px 8px rgba(0, 255, 255, 0.1);
    }

    html[data-theme="light"] .highlight-item:hover {
        background: rgba(0, 123, 255, 0.1);
        transform: translateX(5px);
        box-shadow: 0 3px 8px rgba(0, 123, 255, 0.1);
    }

    html[data-theme="gray"] .highlight-item:hover {
        background: rgba(0, 86, 179, 0.1);
        transform: translateX(5px);
        box-shadow: 0 3px 8px rgba(0, 86, 179, 0.1);
    }


    .news-item {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 15px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        border: 1px solid var(--card-border);
        position: relative;
        overflow: hidden;
    }

    .news-item:first-child {
        border-top: none;
    }

    .news-title {
        color: var(--text-primary);
        margin: 10px 0 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--card-border);
        line-height: 1.3;
    }

    .image-gallery-container {
        position: relative;
        margin-bottom: 15px;
        border-radius: 10px;
        overflow: hidden;
        background: var(--button-bg);
        padding: 10px;
        border: 1px solid var(--card-border);
    }

    .image-gallery {
        display: flex;
        overflow-x: auto;
        scroll-behavior: smooth;
        gap: 15px;
        padding: 8px 0;
        scrollbar-color: var(--accent-color) var(--button-bg);
        scrollbar-width: none;
        border-radius: 8px;
    }

    .image-gallery::-webkit-scrollbar {
        height: 6px;
        display: none;
    }

    .image-gallery::-webkit-scrollbar-track {
        background: var(--button-bg);
        border-radius: 3px;
    }

    .image-gallery::-webkit-scrollbar-thumb {
        background: var(--accent-color);
        border-radius: 3px;
    }

    .image-container {
        flex: 0 0 auto;
        width: calc(100% - 15px);
        min-width: calc(100% - 15px);
        height: 250px;
        display: flex;
        justify-content: center;
        align-items: center;
        background: var(--bg-main);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.5s ease, background-color 0.3s;
        position: relative;
        scroll-snap-align: start;
    }

    .image-container img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: transform 0.3s ease;
        display: block;
    }

    .image-container:hover img {
        transform: scale(1.03);
    }

    .image-container::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 35%;
        background: linear-gradient(transparent, rgba(0,0,0,0.4));
        z-index: 1;
    }

    .fullscreen-image {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0,0,0,0.9);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1001;
    }

    .fullscreen-image img {
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
        cursor: zoom-out;
    }

    .gallery-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 36px;
        height: 36px;
        background: var(--nav-bg);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        z-index: 10;
        transition: all 0.3s ease;
        color: var(--accent-color);
        font-size: 1.1rem;
        border: 1px solid var(--card-border);
    }

    .gallery-nav:hover {
        background: var(--nav-hover-bg);
        color: var(--nav-hover-color);
        transform: translateY(-50%) scale(1.05);
    }

    .gallery-nav.prev {
        left: 15px;
    }

    .gallery-nav.next {
        right: 15px;
    }

    .gallery-indicators {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-top: 12px;
        position: relative;
        z-index: 10;
    }

    .indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--indicator-inactive);
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .indicator.active {
        background: var(--indicator-active);
        transform: scale(1.1);
    }

    .news-content p {
        margin-bottom: 12px;
    }

    .source-link {
        display: inline-flex;
        align-items: center;
        text-decoration: none;
        color: var(--text-accent);
        font-weight: 600;
        transition: all 0.3s ease;
        padding: 0;
        background: none;
        box-shadow: none;
        font-size: 0.95em;
        margin-left: 4px;
        vertical-align: baseline;
        line-height: 1;
        margin-top: 0 !important;
    }

    .source-link:hover {
        color: var(--accent-color);
        text-decoration: underline;
    }

    .source-link i {
        font-size: 0.95em;
        margin-left: 3px;
        vertical-align: middle;
    }

    footer {
        text-align: center;
        margin-top: 40px;
        padding: 20px;
        border-top: 1px solid var(--card-border);
        background: var(--card-bg);
        border-radius: 12px;
    }

    @media (max-width: 768px) {
        body {
            padding: 8px;
            font-size: 14px;
        }

        .theme-selector {
            top: 8px;
            left: 8px;
        }

        .language-selector {
            top: 8px;
            right: 8px;
        }

        .theme-selector select, .language-selector select {
            padding: 5px 8px;
            font-size: 0.8rem;
        }

        /* ... (其余媒体查询样式保持不变) ... */
    }

    /* ... (其余媒体查询样式保持不变) ... */
</style>

</head>
<body>
<!-- 主题选择器 -->
<div class="theme-selector">
    <select id="themeSelect">
        <option value="dark" data-ru="Темная" data-zh="深色" data-en="Dark">Темная</option>
        <option value="light" data-ru="Светлая" data-zh="浅色" data-en="Light">Светлая</option>
        <option value="gray" data-ru="Серая" data-zh="灰色" data-en="Gray">Серая</option>
    </select>
</div>

<!-- 语言选择器 -->
<div class="language-selector">
    <select id="languageSelect">
        <option value="ru">Русский</option>
        <option value="zh">中文</option>
        <option value="en">English</option>
    </select>
</div>

<div class="header-container">
    <svg class="header-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 41 40" fill="none">
        <path d="M20 40H20.0806C31.129 40 40.0806 31.0887 40.0806 20C40.0806 8.91129 31.1694 0 20.0806 0H20C8.91129 0 0 8.91129 0 20C0 31.0887 8.95161 40 20 40Z"
              fill="#00FFFF"></path>
        <path d="M20.0415 11.2354C18.227 11.2354 17.3399 12.3241 15.7673 14.4208C13.8318 17.0418 11.8963 19.9047 10.6463 21.8402C9.75923 23.2515 9.55762 23.937 9.55762 24.5015C9.55762 25.6708 10.3641 26.3966 11.4125 26.3966C12.3399 26.3966 13.0254 25.8321 14.356 24.7434C16.1705 23.2112 17.9044 21.5983 20.0415 21.5983C22.1786 21.5983 23.9125 23.2112 25.727 24.7434C27.0576 25.8321 27.7431 26.3966 28.6705 26.3966C29.7189 26.3966 30.5254 25.6708 30.5254 24.5015C30.5254 23.937 30.3237 23.2515 29.4366 21.8402C28.1866 19.9047 26.2512 17.0418 24.3157 14.4208C22.7431 12.3241 21.856 11.2354 20.0415 11.2354Z"
              fill="black"></path>
    </svg>
    <header>
        <h2 id="categorySummary">Динамика отзывов и новых правил безопасности в автомобильной промышленности.</h2>
    </header>
</div>

<!-- 主体内容 -->

<section class="highlights">
    <h2><i class="fas fa-star"></i> <span id="highlightsText">Основные моменты</span>
    </h2>
    
    <div class="highlight-item" data-ru="Новый национальный стандарт AEB повышен до обязательного, охватывая 90% легковых автомобилей." data-zh="AEB新国标升级为强制标准，覆盖90%轻型车。" data-en="The new AEB national standard has been upgraded to a mandatory requirement, covering 90% of light vehicles.">
        <span>Новый национальный стандарт AEB повышен до обязательного, охватывая 90% легковых автомобилей. <a href="https://auto.gasgoo.com/news/202508/5I70430707C108.shtml" class="source-link">↗</a></span>
    </div>
    
    <div class="highlight-item" data-ru="Ford отзывает 380 тысяч автомобилей из-за проблем с тормозами" data-zh="福特因制动问题召回38万辆车" data-en="Ford recalls 380,000 vehicles due to braking issues">
        <span>Ford отзывает 380 тысяч автомобилей из-за проблем с тормозами <a href="https://auto.gasgoo.com/news/202508/4I70430672C109.shtml" class="source-link">↗</a></span>
    </div>
    
</section>



<article class="news-item">
    <h2 class="news-title" data-ru="Новый национальный стандарт переводит систему AEB из рекомендательной в обязательную для автомобилей категорий M1 и N1, а также повышает технические требования и показатели эффективности." data-zh="新国标将AEB系统从推荐性标准升级为强制性标准，要求M1和N1类汽车强制标配，并提升技术要求和性能指标。"
        data-en="The new national standard upgrades the AEB system from a recommended standard to a mandatory requirement, stipulating that M1 and N1 category vehicles must be equipped with it as standard, while also raising technical requirements and performance benchmarks.">Новый национальный стандарт переводит систему AEB из рекомендательной в обязательную для автомобилей категорий M1 и N1, а также повышает технические требования и показатели эффективности.</h2>
    <div class="meta-info">
            <span class="date">
                <i class="fas fa-calendar-alt"></i>
                2025-08-04
            </span>
    </div>

    
    <div class="image-gallery-container">
        <div class="image-gallery" id="gallery-1">
            
            <div class="image-container">
                <img src="https://imagecn.gasgoo.com/moblogo/News/UEditor/image/20250804/6388993964451017391079235.jpg" alt="新闻配图">
            </div>
            
            <div class="image-container">
                <img src="https://imagecn.gasgoo.com/moblogo/News/UEditor/1640-X/20250804/6388992715597072327009639.jpg" alt="新闻配图">
            </div>
            
            <div class="image-container">
                <img src="https://imagecn.gasgoo.com/moblogo/News/UEditor/image/20250804/6388993979100525359626748.jpg" alt="新闻配图">
            </div>
            
        </div>
        <div class="gallery-nav prev" onclick="scrollGallery('gallery-1', -1)">
            <i class="fas fa-chevron-left"></i>
        </div>
        <div class="gallery-nav next" onclick="scrollGallery('gallery-1', 1)">
            <i class="fas fa-chevron-right"></i>
        </div>
        <div class="gallery-indicators" id="indicators-1"></div>
    </div>
    

    <div class="news-content" data-ru="Новый национальный стандарт «Технические требования и методы испытаний систем автоматического экстренного торможения для легковых автомобилей» заменит действующий рекомендательный стандарт и станет обязательным к 2028 году.  

Требования включают:  
- обязательное оснащение системой AEB для транспортных средств категорий M1 и N1,  
- охват более 90% легковых авто в Китае,  
- улучшенное распознавание пешеходов, велосипедистов,  
- ужесточение испытаний в сложных сценариях,  
- значительное повышение технических показателей."
         data-zh="新国标《轻型汽车自动紧急制动系统技术要求及试验方法》将替代现行推荐性标准，并于2028年强制实施，要求M1和N1类汽车标配AEB系统，覆盖中国90%以上轻型车辆，同时提升对行人、自行车等的识别能力及复杂场景测试要求，性能指标也大幅提高。" data-en="The new national standard "Technical Requirements and Test Methods for Automatic Emergency Braking Systems of Light Vehicles" will replace the current recommended standard and be mandatorily implemented by 2028. It requires M1 and N1 category vehicles to be equipped with AEB systems as standard, covering over 90% of light vehicles in China. The standard also enhances recognition capabilities for pedestrians, bicycles, and other objects, along with stricter testing requirements for complex scenarios, while significantly improving performance indicators.">
        Новый национальный стандарт «Технические требования и методы испытаний систем автоматического экстренного торможения для легковых автомобилей» заменит действующий рекомендательный стандарт и станет обязательным к 2028 году.  

Требования включают:  
- обязательное оснащение системой AEB для транспортных средств категорий M1 и N1,  
- охват более 90% легковых авто в Китае,  
- улучшенное распознавание пешеходов, велосипедистов,  
- ужесточение испытаний в сложных сценариях,  
- значительное повышение технических показателей.
        <a href="https://auto.gasgoo.com/news/202508/5I70430707C108.shtml" class="source-link" style="display: inline-block; margin-top: 15px;">↗</a>
    </div>
</article>

<article class="news-item">
    <h2 class="news-title" data-ru="Ford отзывает в Северной Америке почти 380 тысяч автомобилей из-за проблемы с отказом тормозов, затрагивающей несколько моделей 2025 года выпуска. Причиной отзыва стало возможное переключение электронного усилителя тормозов в аварийный режим во время движения, что приводит к потере тормозного усилия." data-zh="福特因制动失效问题将在北美召回近38万辆汽车，涉及多款2025年款车型。召回原因为电子制动助力器可能在行驶中进入故障状态，导致制动助力失效。"
        data-en="Ford is recalling nearly 380,000 vehicles in North America due to brake failure issues, involving multiple 2025 model year vehicles. The recall reason is that the electronic brake booster may enter a fault state while driving, resulting in loss of brake assist.">Ford отзывает в Северной Америке почти 380 тысяч автомобилей из-за проблемы с отказом тормозов, затрагивающей несколько моделей 2025 года выпуска. Причиной отзыва стало возможное переключение электронного усилителя тормозов в аварийный режим во время движения, что приводит к потере тормозного усилия.</h2>
    <div class="meta-info">
            <span class="date">
                <i class="fas fa-calendar-alt"></i>
                2025-08-04
            </span>
    </div>

    
    <div class="image-gallery-container">
        <div class="image-gallery" id="gallery-2">
            
            <div class="image-container">
                <img src="https://imagecn.gasgoo.com/moblogo/News/UEditor/image/20250804/6388990490274389584617211.png" alt="新闻配图">
            </div>
            
        </div>
        <div class="gallery-nav prev" onclick="scrollGallery('gallery-2', -1)">
            <i class="fas fa-chevron-left"></i>
        </div>
        <div class="gallery-nav next" onclick="scrollGallery('gallery-2', 1)">
            <i class="fas fa-chevron-right"></i>
        </div>
        <div class="gallery-indicators" id="indicators-2"></div>
    </div>
    

    <div class="news-content" data-ru="Автоконцерн Ford отзывает в Северной Америке около 380 тысяч автомобилей из-за потенциального отказа электронного усилителя тормозов. Затронуты модели 2025 года, включая Lincoln Navigator и Ford Bronco. Неисправность может привести к потере усилителя тормозов, но проблема устраняется программным обновлением.  

Ford получил сообщение об одном ДТП на низкой скорости и планирует выпустить OTA-обновление к августу или предоставить сервисное обслуживание у дилеров. Это уже 94-й отзыв Ford с начала года, что отражает стратегию компании по активному выявлению и устранению проблем."
         data-zh="福特汽车因电子制动助力器可能失效的问题，将在北美召回近38万辆汽车，涉及2025年款林肯领航员、福特游骑侠等多款车型。故障可能导致制动助力失效，但可通过软件更新修复。福特已收到一起低速碰撞事故报告，并计划于8月推送OTA更新或提供经销商服务。此次召回是福特今年第94次召回，反映了其主动发现并修复问题的策略。" data-en="Ford Motor is recalling nearly 380,000 vehicles in North America due to potential failure of the electronic brake booster, involving multiple models including the 2025 Lincoln Navigator and Ford Bronco. The malfunction may lead to loss of brake assist but can be fixed via a software update. Ford has received one report of a low-speed collision and plans to release an OTA update or provide dealer services in August. This marks Ford's 94th recall this year, reflecting its proactive strategy to identify and address issues.">
        Автоконцерн Ford отзывает в Северной Америке около 380 тысяч автомобилей из-за потенциального отказа электронного усилителя тормозов. Затронуты модели 2025 года, включая Lincoln Navigator и Ford Bronco. Неисправность может привести к потере усилителя тормозов, но проблема устраняется программным обновлением.  

Ford получил сообщение об одном ДТП на низкой скорости и планирует выпустить OTA-обновление к августу или предоставить сервисное обслуживание у дилеров. Это уже 94-й отзыв Ford с начала года, что отражает стратегию компании по активному выявлению и устранению проблем.
        <a href="https://auto.gasgoo.com/news/202508/4I70430672C109.shtml" class="source-link" style="display: inline-block; margin-top: 15px;">↗</a>
    </div>
</article>


<footer>
    <p id="copyrightText">Авторское право © Atom 2025. Все права защищены</p>
    <!-- 初始的HTML文本会被下面的JS动态更新 -->
    <p id="updateText">Последнее обновление: 2025-08-05 03:07:14</p>
</footer>

<script>
    // 当整个HTML文档加载并解析完毕后，执行初始化函数
    document.addEventListener('DOMContentLoaded', () => {
        // 统一初始化所有功能
        initializeGalleries();      // 初始化所有图片画廊
        initializeLanguage();       // 初始化语言选择器和设置
        initializeTheme();          // 初始化主题选择器和设置
        initializeImageFullscreen(); // 初始化图片点击全屏功能
    });

    // --- 主题初始化 ---
    function initializeTheme() {
        const themeSelect = document.getElementById('themeSelect');
        // 从本地存储中读取已保存的主题，如果没有则默认为 'light'
        const savedTheme = localStorage.getItem('selectedTheme') || 'light';

        applyTheme(savedTheme); // 应用主题
        themeSelect.value = savedTheme; // 更新下拉菜单的显示值

        // 监听主题下拉菜单的 'change' 事件
        themeSelect.addEventListener('change', function() {
            const newTheme = this.value;
            applyTheme(newTheme); // 应用新选择的主题
            localStorage.setItem('selectedTheme', newTheme); // 将新主题保存到本地存储
        });
    }

    // 应用指定的主题
    function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
    }

    // --- 语言初始化 ---
    function initializeLanguage() {
        const languageSelect = document.getElementById('languageSelect');
        // 从本地存储中读取已保存的语言，如果没有则默认为 'ru'
        const savedLang = localStorage.getItem('selectedLanguage') || 'ru';

        languageSelect.value = savedLang; // 更新下拉菜单的显示值
        applyLanguage(savedLang); // 应用语言

        // 监听语言下拉菜单的 'change' 事件
        languageSelect.addEventListener('change', function() {
            const lang = this.value;
            localStorage.setItem('selectedLanguage', lang); // 将新语言保存到本地存储
            applyLanguage(lang); // 应用新选择的语言
        });
    }

    // --- 图库初始化 ---
    function initializeGalleries() {
        // 遍历页面上所有 class 为 'image-gallery' 的元素
        document.querySelectorAll('.image-gallery').forEach(gallery => {
            const galleryId = gallery.id;
            const indicatorsContainer = document.getElementById(`indicators-${galleryId.split('-')[1]}`);
            const imageCount = gallery.children.length;

            if (imageCount === 0 || !indicatorsContainer) return;

            indicatorsContainer.innerHTML = ''; // 清空已有指示器，防止重复生成

            // 根据图片数量创建指示器（小圆点）
            for (let i = 0; i < imageCount; i++) {
                const indicator = document.createElement('div');
                indicator.classList.add('indicator');
                if (i === 0) indicator.classList.add('active'); // 默认第一个为激活状态
                indicator.onclick = () => showImage(galleryId, i);
                indicatorsContainer.appendChild(indicator);
            }

            // 设置自动轮播
            resetAutoScroll(gallery);

            // 监听滚动事件，使用定时器优化性能，在滚动停止后更新指示器
            let scrollTimer;
            gallery.addEventListener('scroll', () => {
                 clearTimeout(scrollTimer); // 清除之前的定时器
                 scrollTimer = setTimeout(() => {
                      updateIndicators(galleryId);
                 }, 150); // 延迟150毫秒执行
            }, { passive: true });
        });
    }

    // --- 图片全屏功能初始化 ---
    function initializeImageFullscreen() {
        // 为所有画廊图片添加点击事件
        document.querySelectorAll('.image-container img').forEach(img => {
            img.addEventListener('click', () => {
                // 创建一个黑色背景的遮罩层
                const fullscreen = document.createElement('div');
                fullscreen.className = 'fullscreen-image';
                // 在遮罩层中显示被点击的图片
                fullscreen.innerHTML = `<img src="${img.src}" alt="fullscreen image">`;
                document.body.appendChild(fullscreen);

                // 点击遮罩层或图片本身，关闭全屏显示
                fullscreen.addEventListener('click', () => {
                    fullscreen.remove();
                });
            });
        });
    }

    // --- 图库功能函数 ---

    // 获取当前滚动到的图片索引
    function getCurrentImageIndex(galleryId) {
        const gallery = document.getElementById(galleryId);
        if (!gallery || gallery.children.length === 0) return 0;

        const scrollLeft = gallery.scrollLeft; // 容器的水平滚动距离
        const itemWidth = gallery.children[0].offsetWidth; // 单个图片的宽度
        const gap = parseInt(getComputedStyle(gallery).gap) || 0; // 图片之间的间隙

        // 通过滚动距离计算当前是第几张图片
        return Math.round(scrollLeft / (itemWidth + gap));
    }

    // 平滑滚动到指定索引的图片
    function showImage(galleryId, index) {
        const gallery = document.getElementById(galleryId);
        const image = gallery.children[index];
        if (!image) return;

        gallery.scrollTo({
            left: image.offsetLeft, // 目标图片的左侧偏移量
            behavior: 'smooth' // 平滑滚动效果
        });

        resetAutoScroll(gallery); // 用户手动切换后，重置自动轮播计时器
    }

    // 控制画廊向左或向右滚动
    function scrollGallery(galleryId, direction) {
        const gallery = document.getElementById(galleryId);
        const currentIndex = getCurrentImageIndex(galleryId);
        let newIndex = currentIndex + direction; // direction 为 1 (右) 或 -1 (左)

        // 实现循环滚动
        if (newIndex >= gallery.children.length) {
             newIndex = 0; // 如果是最后一张，则循环到第一张
        } else if (newIndex < 0) {
             newIndex = gallery.children.length - 1; // 如果是第一张，则循环到最后一张
        }

        showImage(galleryId, newIndex);
    }

    // 重置自动滚动计时器
    function resetAutoScroll(gallery) {
        clearInterval(gallery.dataset.autoScroll); // 清除旧的计时器
        // 设置新的计时器，每5秒自动滚动一次
        gallery.dataset.autoScroll = setInterval(() => {
            scrollGallery(gallery.id, 1); // 向右滚动
        }, 5000);
    }

    // 根据当前图片索引更新指示器（小圆点）的激活状态
    function updateIndicators(galleryId) {
        const indicatorsContainer = document.getElementById(`indicators-${galleryId.split('-')[1]}`);
        if (!indicatorsContainer) return;

        const activeIndex = getCurrentImageIndex(galleryId);
        indicatorsContainer.querySelectorAll('.indicator').forEach((dot, index) => {
            // 如果点的索引与当前图片索引相同，则添加 'active' 类，否则移除
            dot.classList.toggle('active', index === activeIndex);
        });
    }

    // --- 语言应用核心函数 ---
    function applyLanguage(lang) {
        const langMap = {'ru': 'ru-RU', 'zh': 'zh-CN', 'en': 'en-US'};
        document.documentElement.lang = langMap[lang] || 'ru-RU'; // 设置<html lang="...">属性

        // 更新所有带 data-ru 属性的动态文本
        document.querySelectorAll('[data-ru]').forEach(element => {
            if (element.dataset[lang]) {
                 // 对不同类型的元素进行特殊处理
                if (element.classList.contains('news-content')) {
                    const link = element.querySelector('.source-link');
                    element.innerHTML = element.dataset[lang];
                    if (link) element.appendChild(link.cloneNode(true));
                } else if (element.classList.contains('highlight-item')) {
                    const link = element.querySelector('.source-link');
                    const linkHref = link ? link.href : '#';
                    element.innerHTML = `${element.dataset[lang]} <a href="${linkHref}" class="source-link">↗</a>`;
                } else {
                    element.textContent = element.dataset[lang];
                }
            }
        });

        // 更新主题选择器下拉菜单的选项文本
        document.querySelectorAll('#themeSelect option').forEach(option => {
            if (option.dataset[lang]) {
                option.textContent = option.dataset[lang];
            }
        });

        // 定义固定的静态文本翻译
        const translations = {
            ru: {
                highlights: "Основные моменты",
                copyright: "Авторское право © Atom 2025. Все права защищены",
                updated: "Последнее обновление: " // 俄语翻译
            },
            zh: {
                highlights: "重点内容",
                copyright: "版权所有 © Atom 2025。保留所有权利",
                updated: "最后更新: " // 中文翻译
            },
            en: {
                highlights: "Highlights",
                copyright: "Copyright © Atom 2025. All Rights Reserved",
                updated: "Last updated: " // 英语翻译
            }
        };

        // 获取需要翻译的静态元素
        const highlightsText = document.getElementById('highlightsText');
        const copyrightText = document.getElementById('copyrightText');
        const updateText = document.getElementById('updateText'); // **获取更新时间的元素**

        // 应用翻译
        if (highlightsText) highlightsText.textContent = translations[lang].highlights;
        if (copyrightText) copyrightText.textContent = translations[lang].copyright;

        // ---【问题修复处】---
        // 检查updateText元素是否存在，然后更新其内容
        if (updateText) {
            // 将翻译文本和模板变量拼接起来，形成完整的字符串
            updateText.textContent = translations[lang].updated + '2025-08-05 03:07:14';
        }
        // ---【修复结束】---

        // 更新分类摘要
        const categorySummary = document.getElementById('categorySummary');
        if (categorySummary) { // 增加一个检查，确保元素存在
            switch(lang) {
                case 'ru':
                    categorySummary.textContent = "Динамика отзывов и новых правил безопасности в автомобильной промышленности.";
                    break;
                case 'zh':
                    categorySummary.textContent = "汽车行业召回与安全新规动态。";
                    break;
                case 'en':
                    categorySummary.textContent = "Automotive Industry Updates on Recalls and Safety Regulations.";
                    break;
            }
        }
    }
</script>
</body>
</html>